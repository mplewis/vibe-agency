# üèóÔ∏è VIBE RESEARCH FRAMEWORK - Technical Blueprint

**Generated by:** GENESIS_BLUEPRINT (simulated via VIBE_ALIGNER)
**Date:** 2025-11-14
**Version:** 1.0.0
**Based on:** feature_spec.json (VIBE_RESEARCH_FRAMEWORK_SPECS.md)

---

## üìê ARCHITECTURE OVERVIEW

### System Type
**Modular Agent Framework Extension** (integrates into existing vibe-agency state machine)

### Integration Pattern
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  AGENCY_OS_ORCHESTRATOR                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ   PLANNING PHASE      ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   RESEARCH    ‚îÇ  ‚îÇ BUSINESS_        ‚îÇ  ‚îÇ   FEATURE_  ‚îÇ
‚îÇ   (NEW)       ‚îÇ‚îÄ‚ñ∂‚îÇ VALIDATION       ‚îÇ‚îÄ‚ñ∂‚îÇ   SPEC      ‚îÇ
‚îÇ   OPTIONAL    ‚îÇ  ‚îÇ (UPDATED)        ‚îÇ  ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚îÇ research_brief.json
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              RESEARCH SUB-STATE                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   MARKET_    ‚îÇ  ‚îÇ   TECH_      ‚îÇ  ‚îÇ   FACT_      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   RESEARCHER ‚îÇ  ‚îÇ   RESEARCHER ‚îÇ  ‚îÇ   VALIDATOR  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ         ‚îÇ                 ‚îÇ                  ‚îÇ           ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                           ‚îÇ                              ‚îÇ
‚îÇ                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ                  ‚îÇ   USER_      ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ   RESEARCHER ‚îÇ                        ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ DIRECTORY STRUCTURE

```
vibe-research-framework/
‚îÇ
‚îú‚îÄ‚îÄ agency_os/
‚îÇ   ‚îî‚îÄ‚îÄ 01_research_framework/                    # NEW
‚îÇ       ‚îú‚îÄ‚îÄ agents/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ MARKET_RESEARCHER/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _composition.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _knowledge_deps.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _prompt_core.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_01_competitor_identification.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_01_competitor_identification.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_02_pricing_analysis.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_02_pricing_analysis.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_03_market_size_estimation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_03_market_size_estimation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_04_positioning_analysis.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_04_positioning_analysis.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_05_risk_identification.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_05_risk_identification.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_06_output_generation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task_06_output_generation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gates/
‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gate_all_competitors_cited.md
‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gate_pricing_data_verifiable.md
‚îÇ       ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ gate_market_size_has_source.md
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ TECH_RESEARCHER/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _composition.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _knowledge_deps.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _prompt_core.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_01_api_evaluation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_01_api_evaluation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_02_library_comparison.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_02_library_comparison.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_03_stack_recommendation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_03_stack_recommendation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_04_constraint_identification.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_04_constraint_identification.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_05_feasibility_validation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_05_feasibility_validation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_06_output_generation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task_06_output_generation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gates/
‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gate_all_apis_have_docs.md
‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gate_fae_violations_cited.md
‚îÇ       ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ gate_library_maintenance_checked.md
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ FACT_VALIDATOR/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _composition.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _knowledge_deps.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _prompt_core.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_01_knowledge_base_audit.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_01_knowledge_base_audit.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_02_claim_verification.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_02_claim_verification.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_03_red_flag_detection.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_03_red_flag_detection.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_04_citation_enforcement.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_04_citation_enforcement.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_05_correction_recommendations.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_05_correction_recommendations.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_06_output_generation.md
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task_06_output_generation.meta.yaml
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gates/
‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gate_all_claims_verified_or_flagged.md
‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gate_citation_index_complete.md
‚îÇ       ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ gate_no_critical_hallucinations.md
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ USER_RESEARCHER/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ _composition.yaml
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ _knowledge_deps.yaml
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ _prompt_core.md
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ tasks/
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_01_persona_generation.md
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_01_persona_generation.meta.yaml
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_02_pain_point_identification.md
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_02_pain_point_identification.meta.yaml
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_03_interview_script_creation.md
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_03_interview_script_creation.meta.yaml
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_04_survey_design.md
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_04_survey_design.meta.yaml
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_05_user_journey_mapping.md
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_05_user_journey_mapping.meta.yaml
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task_06_output_generation.md
‚îÇ       ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ task_06_output_generation.meta.yaml
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ gates/
‚îÇ       ‚îÇ           ‚îú‚îÄ‚îÄ gate_personas_industry_standard.md
‚îÇ       ‚îÇ           ‚îî‚îÄ‚îÄ gate_interview_questions_actionable.md
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ knowledge/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RESEARCH_market_sizing_formulas.yaml
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RESEARCH_competitor_analysis_templates.yaml
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RESEARCH_red_flag_taxonomy.yaml
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RESEARCH_persona_templates.yaml
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RESEARCH_interview_question_bank.yaml
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ RESEARCH_constraints.yaml
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ state_machine/
‚îÇ           ‚îî‚îÄ‚îÄ RESEARCH_workflow_design.yaml
‚îÇ
‚îú‚îÄ‚îÄ agency_os/core_system/
‚îÇ   ‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ORCHESTRATION_data_contracts.yaml         # UPDATED
‚îÇ   ‚îÇ       (adds: research_brief.schema.json)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ state_machine/
‚îÇ       ‚îî‚îÄ‚îÄ ORCHESTRATION_workflow_design.yaml        # UPDATED
‚îÇ           (adds: RESEARCH sub-state)
‚îÇ
‚îî‚îÄ‚îÄ agency_os/01_planning_framework/
    ‚îî‚îÄ‚îÄ agents/
        ‚îî‚îÄ‚îÄ LEAN_CANVAS_VALIDATOR/
            ‚îú‚îÄ‚îÄ _prompt_core.md                       # UPDATED
            ‚îî‚îÄ‚îÄ tasks/
                ‚îî‚îÄ‚îÄ task_01_canvas_interview.md       # UPDATED
                    (adds: research_brief.json handling)
```

---

## üóÇÔ∏è DATA CONTRACTS

### research_brief.schema.json

**Location:** `agency_os/core_system/contracts/ORCHESTRATION_data_contracts.yaml`

```yaml
- name: "research_brief.schema.json"
  version: "1.0.0"
  $id: "https://api.example.com/schemas/research_brief.v1.0.0.json"
  description: "Output of RESEARCH phase. Input for LEAN_CANVAS_VALIDATOR."
  fields:
    - name: "version"
      type: "string"
      required: true
      default: "1.0"

    - name: "project_id"
      type: "string(uuid)"
      required: true

    - name: "research_completed_at"
      type: "string(timestamp)"
      required: true
      format: "ISO 8601"

    - name: "market_analysis"
      type: "object"
      required: true
      properties:
        - name: "competitors"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "name", type: "string" }
              - { name: "positioning", type: "string" }
              - { name: "pricing", type: "string" }
              - { name: "source", type: "string(uri)" }

        - name: "pricing_insights"
          type: "object"
          properties:
            - { name: "low", type: "number" }
            - { name: "median", type: "number" }
            - { name: "high", type: "number" }
            - { name: "currency", type: "string" }
            - { name: "unit", type: "string" }

        - name: "market_size"
          type: "string"
          description: "TAM/SAM/SOM estimates with source"

        - name: "positioning_opportunities"
          type: "array"
          items: "string"

        - name: "risks"
          type: "array"
          items: "string"

    - name: "tech_analysis"
      type: "object"
      required: true
      properties:
        - name: "recommended_apis"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "name", type: "string" }
              - { name: "purpose", type: "string" }
              - { name: "pricing", type: "string" }
              - { name: "rate_limits", type: "string" }
              - { name: "reliability", type: "string" }
              - { name: "source", type: "string(uri)" }

        - name: "recommended_libraries"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "name", type: "string" }
              - { name: "purpose", type: "string" }
              - { name: "license", type: "string" }
              - { name: "maintenance_status", type: "string" }
              - { name: "github_stars", type: "integer" }
              - { name: "source", type: "string(uri)" }

        - name: "technical_constraints"
          type: "array"
          items: "string"

        - name: "feasibility_score"
          type: "enum"
          values: ["high", "medium", "low"]

        - name: "flagged_features"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "feature", type: "string" }
              - { name: "fae_violation", type: "string" }
              - { name: "recommendation", type: "string" }

    - name: "fact_validation"
      type: "object"
      required: true
      properties:
        - name: "validated_claims"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "claim", type: "string" }
              - { name: "source", type: "string(uri)" }
              - { name: "verification_status", type: "enum", values: ["VERIFIED", "UNVERIFIED"] }
              - { name: "verified_at", type: "string(timestamp)" }

        - name: "flagged_hallucinations"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "claim", type: "string" }
              - { name: "issue", type: "string" }
              - { name: "red_flag_type", type: "enum", values: ["context-collapse", "plausible-falsehood", "platitude", "category-error"] }
              - { name: "recommendation", type: "string" }

        - name: "citation_index"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "url", type: "string(uri)" }
              - { name: "cited_in", type: "array", items: "string" }

        - name: "quality_score"
          type: "string"
          format: "X/100"

        - name: "issues_found"
          type: "integer"

        - name: "issues_critical"
          type: "integer"

    - name: "user_insights"
      type: "object"
      required: false
      properties:
        - name: "personas"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "name", type: "string" }
              - { name: "age_range", type: "string" }
              - { name: "job_title", type: "string" }
              - { name: "goals", type: "array", items: "string" }
              - { name: "pain_points", type: "array", items: "string" }
              - { name: "tools_used", type: "array", items: "string" }
              - { name: "quote", type: "string" }

        - name: "pain_points"
          type: "array"
          items: "string"

        - name: "interview_script"
          type: "object"
          properties:
            - { name: "intro", type: "string" }
            - { name: "questions", type: "array", items: "string" }

        - name: "user_journeys"
          type: "array"
          items:
            type: "object"
            properties:
              - { name: "stage", type: "string" }
              - { name: "touchpoints", type: "array", items: "string" }
              - { name: "emotions", type: "string" }

    - name: "handoff_to_lean_canvas"
      type: "object"
      required: true
      properties:
        - name: "status"
          type: "enum"
          values: ["READY", "NOT_READY"]

        - name: "key_insights"
          type: "array"
          items: "string"
```

---

## üîß AGENT COMPOSITION PATTERNS

### Example: MARKET_RESEARCHER/_composition.yaml

```yaml
composition_version: "2.0"
agent_id: MARKET_RESEARCHER
agent_version: "1.0"

composition_order:
  - source: _prompt_core.md
    type: base
    required: true
    description: "Core personality: Senior Market Research Analyst"

  - source: ${knowledge_files}
    type: knowledge
    required: true
    resolve_from: _knowledge_deps.yaml
    description: "Market sizing formulas, competitor analysis templates"

  - source: ${task_prompt}
    type: task
    required: true
    path_pattern: tasks/${task_id}.md
    description: "Specific task (competitor ID, pricing, sizing, etc.)"

  - source: ${gate_prompts}
    type: validation
    required: false
    resolve_from: tasks/${task_id}.meta.yaml#validation_gates
    description: "Quality gates (all competitors cited, etc.)"

  - source: ${runtime_context}
    type: context
    required: true
    description: "User vision, previous task outputs"

variables:
  project_id: ${runtime_context.project_id}
  user_vision: ${runtime_context.user_vision}

conflict_resolution:
  strategy: last_wins
  exceptions:
    - section: CRITICAL_CITATIONS
      strategy: merge_all
      reason: "All sources must be cumulative"

notes: |
  MARKET_RESEARCHER is a sequential 6-task workflow.
  Tasks build on each other:
  - Task 1 ‚Üí competitor_list.json
  - Task 2 ‚Üí pricing_data.json
  - Task 3 ‚Üí market_size_estimate.json
  - Task 4 ‚Üí positioning_map.json
  - Task 5 ‚Üí risk_assessment.json
  - Task 6 ‚Üí market_analysis (final section)
```

---

## üìö KNOWLEDGE BASE FILES

### RESEARCH_market_sizing_formulas.yaml

```yaml
version: "1.0"
last_updated: "2025-11-14"

formulas:
  - name: "TAM_calculation"
    full_name: "Total Addressable Market"
    formula: "Total potential customers √ó Average revenue per customer"
    example: "100M freelancers √ó $120/year = $12B TAM"
    source: "https://www.svb.com/startup-insights/market-research/tam-sam-som"

  - name: "SAM_calculation"
    full_name: "Serviceable Addressable Market"
    formula: "TAM √ó percentage in your segment"
    example: "$12B TAM √ó 5% (designers only) = $600M SAM"
    source: "https://www.svb.com/startup-insights/market-research/tam-sam-som"

  - name: "SOM_calculation"
    full_name: "Serviceable Obtainable Market"
    formula: "SAM √ó realistic market share (1-5% for startups)"
    example: "$600M SAM √ó 2% = $12M SOM (Year 1 target)"
    source: "https://www.svb.com/startup-insights/market-research/tam-sam-som"

estimation_heuristics:
  - heuristic: "bottom_up"
    description: "Start with your product's pricing and count potential customers"
    best_for: "New markets, niche products"

  - heuristic: "top_down"
    description: "Start with industry reports (Gartner, Forrester) and narrow down"
    best_for: "Established markets"

  - heuristic: "value_theory"
    description: "Calculate value created for customers, estimate capture %"
    best_for: "B2B SaaS"

sources:
  - name: "Gartner Market Guides"
    url: "https://www.gartner.com/en/research"
    access: "Paid"

  - name: "Statista"
    url: "https://www.statista.com"
    access: "Freemium"

  - name: "IBISWorld"
    url: "https://www.ibisworld.com"
    access: "Paid"
```

### RESEARCH_red_flag_taxonomy.yaml

```yaml
version: "1.0"
last_updated: "2025-11-14"
based_on: "Audit document analysis"

red_flags:
  - type: "context-collapse"
    description: "AI compresses distinct concepts into single misleading claim"
    examples:
      - "The market is growing rapidly" (no timeframe, no rate, no source)
      - "Users prefer Feature X" (which users? survey source?)
    detection_pattern: "Vague claim without specific numbers or attribution"
    severity: "high"

  - type: "plausibly-sounding-falsehood"
    description: "Claim sounds true but is factually incorrect or unverifiable"
    examples:
      - "Stripe has 99.99% uptime" (no source, possibly wrong SLA tier)
      - "React is faster than Vue" (depends on use case, no benchmark cited)
    detection_pattern: "Specific claim without verifiable source"
    severity: "critical"

  - type: "context-free-platitude"
    description: "Generic advice that applies to everything (and nothing)"
    examples:
      - "Focus on user experience"
      - "Build a scalable architecture"
    detection_pattern: "Generic statement without actionable specifics"
    severity: "medium"

  - type: "category-error"
    description: "Mixing incompatible concepts or domains"
    examples:
      - "Use blockchain for faster database queries" (wrong tech for problem)
      - "AI will solve all customer support issues" (category error)
    detection_pattern: "Tech solution doesn't match problem domain"
    severity: "high"

validation_rules:
  - rule: "all_numerical_claims_need_source"
    description: "Any claim with numbers (pricing, market size, %) must cite source"
    examples:
      - "‚ùå Market is $5B" ‚Üí "‚úÖ Market is $5B (Gartner, 2024)"

  - rule: "all_competitor_claims_need_url"
    description: "Competitor data must link to their pricing page or docs"
    examples:
      - "‚ùå Asana costs $10/user" ‚Üí "‚úÖ Asana costs $10.99/user (https://asana.com/pricing)"

  - rule: "all_technical_feasibility_claims_need_fae_reference"
    description: "Tech constraints must cite FAE rule or docs"
    examples:
      - "‚ùå WebSockets don't work on serverless" ‚Üí "‚úÖ WebSockets incompatible with serverless (FAE-TECH-001)"
```

---

## üîÑ STATE MACHINE INTEGRATION

### ORCHESTRATION_workflow_design.yaml (Updated)

```yaml
# ... existing states ...

states:
  planning:
    id: "PLANNING"
    description: "Business validation and feature specification"
    sub_states:
      - id: "RESEARCH"                              # NEW
        optional: true
        agents:
          - MARKET_RESEARCHER
          - TECH_RESEARCHER
          - FACT_VALIDATOR
          - USER_RESEARCHER
        input_artifacts:
          - user_vision (text)
        output_artifacts:
          - research_brief.json
        exit_conditions:
          - research_brief.status == "READY"

      - id: "BUSINESS_VALIDATION"
        optional: false
        agents:
          - LEAN_CANVAS_VALIDATOR
        input_artifacts:
          - research_brief.json (optional)          # UPDATED
        output_artifacts:
          - lean_canvas_summary.json
        exit_conditions:
          - lean_canvas_summary.readiness.status == "READY"

      - id: "FEATURE_SPECIFICATION"
        optional: false
        agents:
          - VIBE_ALIGNER
        input_artifacts:
          - lean_canvas_summary.json
        output_artifacts:
          - feature_spec.json
        exit_conditions:
          - feature_spec.validation.ready_for_genesis == true

orchestration_rules:
  - rule: "research_optionality"
    condition: "ORCHESTRATOR must ask user: 'Start with Research phase?'"
    actions:
      - if_yes: "Run RESEARCH ‚Üí BUSINESS_VALIDATION ‚Üí FEATURE_SPECIFICATION"
      - if_no: "Skip to BUSINESS_VALIDATION ‚Üí FEATURE_SPECIFICATION"

  - rule: "research_to_lean_canvas_handoff"
    condition: "research_brief.handoff_to_lean_canvas.status == 'READY'"
    actions:
      - "Pass research_brief.json to LEAN_CANVAS_VALIDATOR"
      - "LEAN_CANVAS_VALIDATOR pre-populates fields from research insights"
```

---

## üß™ TEST SUITE DESIGN

### test_research_workflow.py

```python
"""
Test suite for RESEARCH ‚Üí BUSINESS_VALIDATION integration
"""

def test_research_phase_runs_all_agents():
    """Ensure all 4 agents execute sequentially"""
    result = run_research_phase(user_vision="Build SaaS for designers")

    assert result["market_analysis"] is not None
    assert result["tech_analysis"] is not None
    assert result["fact_validation"] is not None
    assert result["user_insights"] is not None

def test_research_brief_schema_valid():
    """Ensure output matches research_brief.schema.json"""
    result = run_research_phase(user_vision="Build SaaS for designers")

    assert validate_schema(result, "research_brief.schema.json") == True

def test_all_sources_cited():
    """Ensure FACT_VALIDATOR enforces citation requirement"""
    result = run_research_phase(user_vision="Build SaaS for designers")

    for claim in result["fact_validation"]["validated_claims"]:
        assert claim["source"] is not None
        assert claim["source"].startswith("http")

def test_lean_canvas_accepts_research_brief():
    """Ensure LEAN_CANVAS_VALIDATOR accepts optional research input"""
    research_brief = run_research_phase(user_vision="Build SaaS")

    lean_canvas = run_lean_canvas_validator(research_brief=research_brief)

    assert lean_canvas["canvas_fields"]["customer_segments"] contains research_brief["market_analysis"]["positioning_opportunities"]

def test_lean_canvas_backward_compatible():
    """Ensure LEAN_CANVAS_VALIDATOR works without research (legacy mode)"""
    lean_canvas = run_lean_canvas_validator(research_brief=None)

    assert lean_canvas["readiness"]["status"] in ["READY", "NOT_READY"]

def test_fae_violations_detected():
    """Ensure TECH_RESEARCHER flags FAE violations"""
    result = run_tech_researcher(features=["real-time collaborative editor"])

    assert len(result["tech_analysis"]["flagged_features"]) > 0
    assert result["tech_analysis"]["flagged_features"][0]["fae_violation"] == "FAE-003"

def test_red_flags_detected():
    """Ensure FACT_VALIDATOR detects hallucinations"""
    market_analysis = {"market_size": "Market is huge"}  # No source

    result = run_fact_validator(market_analysis)

    assert len(result["flagged_hallucinations"]) > 0
    assert result["flagged_hallucinations"][0]["red_flag_type"] == "context-collapse"
```

---

## üöÄ IMPLEMENTATION ROADMAP

### Sprint 1: Foundation (Weeks 1-2)
- [ ] Create directory structure (`agency_os/01_research_framework/`)
- [ ] Define `research_brief.schema.json` in data contracts
- [ ] Update `ORCHESTRATION_workflow_design.yaml` with RESEARCH sub-state
- [ ] Write knowledge base YAML files (market sizing, red flags)

### Sprint 2: MARKET_RESEARCHER (Weeks 3-4)
- [ ] Write `_prompt_core.md` (Senior Market Analyst persona)
- [ ] Write 6 task files (competitor ID, pricing, sizing, positioning, risk, output)
- [ ] Write 3 gate files (citations, verifiable data, sources)
- [ ] Write `_composition.yaml` and `_knowledge_deps.yaml`
- [ ] Test with sample user vision

### Sprint 3: TECH_RESEARCHER (Weeks 5-6)
- [ ] Write `_prompt_core.md` (Senior Tech Architect persona)
- [ ] Write 6 task files (API eval, library comparison, stack rec, constraints, feasibility, output)
- [ ] Integrate FAE_constraints.yaml validation logic
- [ ] Write gates (all APIs documented, FAE violations cited)
- [ ] Test with sample feature requirements

### Sprint 4: FACT_VALIDATOR (Weeks 7-9)
- [ ] Write `_prompt_core.md` (Fact-Checker persona)
- [ ] Write 6 task files (audit, claim verification, red flags, citations, corrections, output)
- [ ] Implement red flag taxonomy (YAML knowledge base)
- [ ] Write gates (all claims verified or flagged, no critical hallucinations)
- [ ] Test with intentionally flawed research data

### Sprint 5: USER_RESEARCHER (Weeks 10-11)
- [ ] Write `_prompt_core.md` (User Research Specialist persona)
- [ ] Write 6 task files (personas, pain points, interview script, survey, journey, output)
- [ ] Create persona templates (YAML knowledge base)
- [ ] Write gates (personas industry-standard, questions actionable)
- [ ] Test with sample user description

### Sprint 6: Integration (Week 12)
- [ ] Update LEAN_CANVAS_VALIDATOR to accept `research_brief.json`
- [ ] Update `task_01_canvas_interview.md` with research data mapping
- [ ] Ensure backward compatibility (legacy mode without research)
- [ ] Write integration tests (`test_research_workflow.py`)

### Sprint 7: Testing & Documentation (Week 13)
- [ ] Run full test suite
- [ ] Fix bugs and edge cases
- [ ] Write user documentation ("How to use Research phase")
- [ ] Write developer documentation (agent composition guide)

---

## ‚ö†Ô∏è CRITICAL SUCCESS FACTORS

1. **Citation Enforcement:** FACT_VALIDATOR must block output if critical claims lack sources
2. **Backward Compatibility:** LEAN_CANVAS_VALIDATOR must work with AND without research_brief.json
3. **Optionality:** ORCHESTRATOR must allow users to skip RESEARCH phase
4. **Zero Breaking Changes:** Existing workflows must continue to work unchanged
5. **FAE Integration:** TECH_RESEARCHER must reference existing FAE rules (no duplication)

---

## üìä QUALITY GATES

### Gate 01: Research Scope Clear
- User vision is specific enough for research (min 50 chars)
- User has chosen to run research phase

### Gate 02: All Sources Cited
- Every competitor has `source:` URL
- Every pricing claim has `source:` URL
- Every market size estimate has `source:` citation
- Every API/library has `source:` docs link

### Gate 03: Ready for Business Validation
- `research_brief.handoff_to_lean_canvas.status == "READY"`
- No critical hallucinations flagged by FACT_VALIDATOR
- FAE violations documented with recommendations

---

## üîê CONSTRAINTS & LIMITATIONS

1. **No ML/AI Generation:** All research uses web search + templates (no trained models)
2. **Manual User Research:** USER_RESEARCHER generates scripts, NOT actual survey data
3. **Limited Market Data:** Relies on free sources (Statista free tier, GitHub, public docs)
4. **English Only (v1.0):** All research outputs in English (i18n deferred to v2.0)
5. **No Real-Time APIs:** No integrations with Crunchbase/PitchBook APIs (v1.0 uses web search)

---

**End of Technical Blueprint**

---

## üìù NEXT STEPS

1. **Review this blueprint** with technical lead
2. **Estimate effort** for each sprint (confirm 12-13 week timeline)
3. **Begin Sprint 1** (foundation + data contracts)
4. **Set up test environment** for agent composition testing

**Blueprint Status:** ‚úÖ READY FOR IMPLEMENTATION
