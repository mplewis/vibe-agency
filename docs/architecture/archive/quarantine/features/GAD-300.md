# GAD-300: Agent Framework & Runtime

**Status:** üìù PLACEHOLDER (Pillar defined, content to be developed)
**Date:** 2025-11-17
**Pillar:** GAD-3XX (Agent Framework & Runtime)
**Priority:** P1 (Foundation pillar)

---

## Executive Summary

**Pillar 3 (GAD-3XX)** encompasses the Agent Framework and Runtime systems - the core infrastructure that powers agent execution, prompt composition, and tool orchestration in vibe-agency.

**Scope:**
- Agent composition and lifecycle management
- Prompt registry and governance
- Runtime systems (LLM client, execution management)
- Tool orchestration and delegation
- Prompt assembly and validation

---

## What Belongs in GAD-3XX

### In Scope (Agent Framework)
- **Agent Composition:** How agents are assembled from prompts, tools, knowledge
- **Prompt Registry:** Central registry for all prompts (governance, validation, versioning)
- **Prompt Runtime:** Execution engine that composes and delivers prompts to LLMs
- **LLM Client:** Integration layer with Anthropic API (delegation model)
- **Tool Orchestration:** How tools are made available to agents
- **Execution Patterns:** File-based delegation, multi-turn workflows

### Out of Scope (Belongs Elsewhere)
- **SDLC Orchestration:** ‚Üí GAD-2XX (Core Orchestrator, phase handlers)
- **Planning Framework:** ‚Üí GAD-1XX (Planning agents, research capabilities)
- **Quality Gates:** ‚Üí GAD-4XX (Testing, validation, enforcement)
- **Runtime Engineering:** ‚Üí GAD-5XX (MOTD, kernel, Layer 0)
- **Knowledge Department:** ‚Üí GAD-6XX (Knowledge graph, domain knowledge)
- **STEWARD Governance:** ‚Üí GAD-7XX (Policy enforcement, access control)
- **Integration Matrix:** ‚Üí GAD-8XX (Cross-pillar integration, layer detection)

---

## Current State (As of 2025-11-17)

### Implemented Components

**agency_os/core_system/runtime/**
- prompt_runtime.py (679 lines) - Prompt composition and execution
- prompt_registry.py (424 lines) - Central prompt registry
- llm_client.py (393 lines) - LLM API integration

**Verification:**
```bash
ls -la agency_os/core_system/runtime/*.py
wc -l agency_os/core_system/runtime/*.py
```

---

## Planned Sub-Documents (GAD-3XX Series)

- **GAD-301:** Prompt Composition System (Planned)
- **GAD-302:** Agent Lifecycle Management (Planned)
- **GAD-303:** Tool Orchestration (Planned)
- **GAD-304:** LLM Integration Strategy (Planned)

---

## Key Architectural Decisions

### Decision 1: Delegated Execution Model
**Choice:** vibe-cli returns prompts via STDOUT, does NOT make API calls
**Rationale:** See ADR-003 - Claude Code operator handles intelligence

### Decision 2: File-Based Delegation (GAD-003)
**Choice:** Agents communicate via JSON files in delegation/ directory
**Rationale:** Works in all environments (browser, desktop, CI/CD)

### Decision 3: Prompt Registry as Single Source of Truth
**Choice:** All prompts managed centrally via prompt_registry.py
**Rationale:** Governance, validation, versioning in one place

---

## Verification Commands

```bash
# Agent Framework components exist
ls -la agency_os/core_system/runtime/
wc -l agency_os/core_system/runtime/*.py

# Prompt registry works
uv run pytest tests/test_prompt_registry.py -v

# File-based delegation works
uv run pytest tests/test_file_based_delegation.py -v
```

---

**Last Updated:** 2025-11-17
**Maintainer:** Architecture Team
