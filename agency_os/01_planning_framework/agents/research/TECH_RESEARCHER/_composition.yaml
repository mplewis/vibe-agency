composition_version: "2.0"
agent_id: TECH_RESEARCHER
agent_version: "1.0"

composition_order:
  - source: _prompt_core.md
    type: base
    required: true
    description: "Core personality: Senior Technical Architect"

  - source: ${knowledge_files}
    type: knowledge
    required: true
    resolve_from: _knowledge_deps.yaml
    description: "FAE constraints, technical evaluation criteria"

  - source: ${task_prompt}
    type: task
    required: true
    path_pattern: tasks/${task_id}.md
    description: "Specific task (API evaluation, library comparison, etc.)"

  - source: ${gate_prompts}
    type: validation
    required: false
    resolve_from: tasks/${task_id}.meta.yaml#validation_gates
    description: "Quality gates (all APIs documented, FAE violations cited)"

  - source: ${runtime_context}
    type: context
    required: true
    description: "User vision, feature requirements, previous task outputs"

variables:
  project_id: ${runtime_context.project_id}
  user_vision: ${runtime_context.user_vision}
  feature_requirements: ${runtime_context.feature_requirements}

conflict_resolution:
  strategy: last_wins
  exceptions:
    - section: FAE_VIOLATIONS
      strategy: merge_all
      reason: "All FAE violations must be cumulative"

notes: |
  TECH_RESEARCHER is a sequential 6-task workflow.
  Tasks build on each other:
  - Task 1 → api_evaluation.json
  - Task 2 → library_comparison.json
  - Task 3 → stack_recommendation.json
  - Task 4 → constraint_identification.json
  - Task 5 → feasibility_validation.json
  - Task 6 → tech_analysis (final section)
