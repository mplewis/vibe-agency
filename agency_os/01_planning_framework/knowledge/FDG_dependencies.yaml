# FDG_dependencies.yaml
# Feature Dependency Graph - Logical Architecture Dependencies

version: "1.0"
last_updated: "2025-01-15"

---

# SECTION 1: Core Feature Dependencies

features:
  - id: "FDG-001"
    name: "user_authentication_basic"
    description: "Allow users to register and log in with email/password"
    required_dependencies:
      - component: "user_database"
        reason: "Must persist user credentials (e.g., email, name) and profile data"
        missing_consequence: "Cannot store or retrieve user accounts"
        alternatives: ["sql_database", "nosql_document_database"]
      - component: "password_hashing_library"
        reason: "Must securely hash and salt passwords (never store plaintext)"
        missing_consequence: "Critical security vulnerability; all user passwords exposed if database is breached"
        alternatives: ["bcrypt", "argon2", "scrypt"]
      - component: "session_management_system"
        reason: "Must track which users are logged in between stateless HTTP requests"
        missing_consequence: "Users cannot stay logged in after a single page load"
        alternatives: ["jwt_tokens", "server_side_sessions"]
    optional_dependencies:
      - component: "password_reset_flow"
        reason: "Users will inevitably forget their passwords"
        adds_dependencies: ["email_service", "secure_token_generation", "token_storage", "rate_limiting"]
      - component: "email_verification_system"
        reason: "Must verify user owns the email address to prevent spam and fake accounts"
        adds_dependencies: ["email_service", "secure_token_generation", "token_storage"]
      - component: "remember_me_functionality"
        reason: "Improves user experience by providing a long-lived session"
        adds_dependencies: ["persistent_cookie_storage", "long_lived_token_database"]
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-002"
    name: "password_reset_flow"
    description: "Allow users to reset their forgotten password via email"
    required_dependencies:
      - component: "user_database"
        reason: "Must look up the user by their email or username to initiate the reset"
        missing_consequence: "Cannot identify which account to reset"
      - component: "email_service"
        reason: "Must send the reset link/code to the user via a secure, out-of-band channel"
        missing_consequence: "User can never receive the reset instructions"
        alternatives: ["sendgrid", "mailgun", "aws_ses", "postmark"]
      - component: "secure_token_generation"
        reason: "Must create a cryptographically secure, random, single-use token to authorize the reset"
        missing_consequence: "Vulnerability to token guessing/brute-force attacks, allowing account takeover"
        alternatives: ["uuid_v4", "crypto_random_bytes"]
      - component: "token_storage"
        reason: "Must store a hashed version of the token with a user ID and expiration to validate it later"
        missing_consequence: "Cannot verify the token provided by the user"
        alternatives: ["sql_table_reset_tokens", "redis_with_ttl"]
      - component: "token_expiration_logic"
        reason: "Reset tokens must be short-lived (e.g., 15-60 min) to reduce the attack window"
        missing_consequence: "Old reset tokens can be found and used by attackers days or weeks later"
      - component: "rate_limiting"
        reason: "Must prevent attackers from flooding a user's email or brute-forcing reset requests"
        missing_consequence: "Denial of Service (DoS) vulnerability and allows for account enumeration"
        alternatives: ["ip_based_limiting", "user_account_based_limiting"]
    optional_dependencies: []
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-003"
    name: "user_authentication_oauth"
    description: "Allow users to log in using a third-party provider (e.g., Google, GitHub)"
    required_dependencies:
      - component: "oauth_provider_registration"
        reason: "Must register the application with the 3rd-party provider (e.g., Google API Console) to get credentials"
        missing_consequence: "Provider will reject all authentication requests"
      - component: "client_secret_management"
        reason: "Must securely store and use the client_secret provided by the OAuth provider"
        missing_consequence: "Cannot authenticate the application to the provider; exposing the secret leads to critical vulnerability"
        alternatives: ["environment_variables", "secrets_manager", "vault"]
      - component: "redirect_uri_handling"
        reason: "Must provide a secure, whitelisted server endpoint (redirect_uri) for the provider to send the authorization code to"
        missing_consequence: "Provider will reject the request; misconfiguration can lead to token interception"
      - component: "token_exchange_endpoint"
        reason: "A server-side endpoint is required to securely exchange the received authorization_code for an access_token using the client_secret"
        missing_consequence: "Cannot complete the login flow or get user data; flow cannot be done on client-side"
      - component: "user_profile_mapping"
        reason: "Must have logic to fetch the provider's user profile (e.g., email) and map/link it to a local user account in the user_database"
        missing_consequence: "User can log in to the provider, but the application doesn't know who they are"
    optional_dependencies:
      - component: "scope_request_handling"
        reason: "To request additional permissions, like 'read:user:email' or 'calendar.read'"
        adds_dependencies: ["user_consent_ui_handling"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-004"
    name: "user_authentication_2fa_sms"
    description: "Add Two-Factor Authentication using SMS text codes"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "2FA is a secondary layer; it requires a primary authentication method (like password) to be in place"
        missing_consequence: "No first factor to secure"
      - component: "sms_gateway_provider"
        reason: "Must use an external service (e.g., Twilio) to send the 2FA code via SMS"
        missing_consequence: "Cannot send the text message"
        alternatives: ["twilio", "vonage", "aws_sns"]
      - component: "secure_code_generation"
        reason: "Must generate a short, random, time-limited numerical code (e.g., 6 digits)"
        missing_consequence: "Predictable codes can be guessed by attackers"
      - component: "code_storage_and_expiration"
        reason: "Must store the generated code (hashed) with an expiration (e.g., 5 min) to validate the user's input"
        missing_consequence: "Cannot verify the code; old codes could be reused"
        alternatives: ["redis_with_ttl", "temp_database_table"]
      - component: "rate_limiting"
        reason: "Must prevent an attacker from repeatedly trying to guess the code"
        missing_consequence: "Brute-force vulnerability on the 2FA-check endpoint"
    optional_dependencies:
      - component: "recovery_code_system"
        reason: "Provides a backup method for users who lose their phone"
        adds_dependencies: ["one_time_use_code_database"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-005"
    name: "user_profile_photo_upload"
    description: "Allow users to upload a profile photo"
    required_dependencies:
      - component: "file_upload_handling"
        reason: "Provides the basic mechanism for receiving, validating, and storing a file"
        missing_consequence: "Cannot receive the image file from the user"
        adds_dependencies: ["file_storage", "file_type_validation"]
      - component: "image_resizing_service"
        reason: "Users upload large (e.g., 10MB) photos. Must create smaller, optimized versions (e.g., 32px, 128px) for thumbnails and avatars"
        missing_consequence: "Application will be extremely slow, wasting bandwidth and storage; high costs"
        alternatives: ["background_job_processor", "real_time_resizing_proxy_e.g_cloudinary"]
      - component: "cdn_or_cache"
        reason: "Profile photos are accessed frequently and are static. A CDN is required to serve them quickly and reduce server load"
        missing_consequence: "Slow image load times, high server load, expensive data egress"
        alternatives: ["aws_cloudfront", "cloudflare"]
      - component: "default_avatar_fallback"
        reason: "Must have a default image to display for users who have not uploaded a photo"
        missing_consequence: "Broken UI/images for new or private users"
        alternatives: ["ui_asset", "dynamically_generated_initials"]
    optional_dependencies:
      - component: "image_cropping_ui"
        reason: "Allows users to select the part of the image they want to use"
        adds_dependencies: ["javascript_cropping_library"]
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-006"
    name: "product_catalog"
    description: "Display a list of products in an e-commerce application"
    required_dependencies:
      - component: "product_database"
        reason: "Must persist product information (name, description, price, attributes)"
        missing_consequence: "No products to display"
        alternatives: ["sql_database", "nosql_document_database"]
      - component: "product_api_endpoint"
        reason: "An API is needed to fetch product data for the frontend"
        missing_consequence: "Web/mobile client cannot load products"
        alternatives: ["rest_api", "graphql_api"]
      - component: "asset_storage_for_images"
        reason: "Product images cannot be stored in the database; they must be in file storage"
        missing_consequence: "No product images can be shown"
        alternatives: ["aws_s3", "google_cloud_storage", "cloudinary"]
    optional_dependencies:
      - component: "search_indexing_service"
        reason: "Basic SQL 'LIKE' queries are too slow for a large catalog. A dedicated search engine is needed for fast, relevant search"
        missing_consequence: "Slow, inaccurate, or non-existent search functionality"
        adds_dependencies: ["elasticsearch", "opensearch", "algolia"]
      - component: "product_categorization_system"
        reason: "To organize products into departments, types, etc."
        adds_dependencies: ["category_database_table"]
      - component: "caching_layer"
        reason: "Product data is read often but written rarely. Caching query results dramatically improves performance"
        missing_consequence: "High database load, slow page loads during high traffic"
        adds_dependencies: ["redis", "memcached"]
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-007"
    name: "shopping_cart"
    description: "Allow users (guest and registered) to add items to a temporary cart"
    required_dependencies:
      - component: "session_management_system"
        reason: "Must associate cart data with a specific user session, even if the user is not logged in"
        missing_consequence: "Cart is lost on every page load; cannot distinguish between users"
        alternatives: ["cookie_sessions", "jwt_tokens"]
      - component: "ephemeral_data_store"
        reason: "Shopping carts are temporary and high-write. A fast, non-relational store is ideal for holding cart data"
        missing_consequence: "Using the main SQL DB is slow and adds load; data is not temporary"
        alternatives: ["redis", "memcached", "browser_local_storage"]
      - component: "product_database"
        reason: "Must fetch product details (price, name) when a cart is retrieved or displayed"
        missing_consequence: "Cannot display cart items or calculate totals"
    optional_dependencies:
      - component: "cart_persistence_to_db"
        reason: "To save a logged-in user's cart so they can access it on another device"
        adds_dependencies: ["user_database", "cart_database_table"]
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-008"
    name: "checkout_process"
    description: "Allow a user to purchase the items in their shopping cart"
    required_dependencies:
      - component: "shopping_cart"
        reason: "The checkout process is the state transition for a cart; it requires a cart to exist"
        missing_consequence: "Nothing to check out"
      - component: "payment_processing"
        reason: "Must have a way to securely collect payment from the user"
        missing_consequence: "Cannot collect money; not a real checkout"
        adds_dependencies: ["payment_gateway", "server_side_payment_intent_endpoint", "webhook_endpoint_for_events"]
      - component: "inventory_service"
        reason: "Must check and lock item stock at the moment of checkout to prevent overselling"
        missing_consequence: "Race conditions, selling out-of-stock items, customer dissatisfaction"
        alternatives: ["database_transaction_lock", "dedicated_inventory_microservice"]
      - component: "order_management_system"
        reason: "Must have a system to create a permanent, immutable order record upon successful payment"
        missing_consequence: "Payment is taken but no order is recorded or fulfilled"
        adds_dependencies: ["order_database_table"]
      - component: "customer_database"
        reason: "Must store customer information (shipping address, email) to fulfill the order"
        missing_consequence: "Cannot fulfill or contact the customer about the order"
    optional_dependencies:
      - component: "tax_calculation_service"
        reason: "Required for legal compliance to calculate sales tax based on location"
        missing_consequence: "Legal and financial non-compliance"
        adds_dependencies: ["avalara", "taxjar", "custom_tax_tables"]
      - component: "shipping_integration"
        reason: "To calculate shipping costs from providers (UPS, FedEx) based on address and cart weight"
        missing_consequence: "Cannot charge for shipping; must use flat rates"
        adds_dependencies: ["easypost", "shippo", "custom_carrier_api"]
      - component: "transactional_email_service"
        reason: "To send the order confirmation and receipt to the user"
        missing_consequence: "Poor user experience; no record of purchase for the user"
        adds_dependencies: ["email_service", "email_templates"]
    complexity_score: "critical"
    typical_scope: "v1.0"

  - id: "FDG-009"
    name: "payment_processing_stripe"
    description: "Accept one-time payments from users via Stripe PaymentIntents"
    required_dependencies:
      - component: "stripe_api_keys_management"
        reason: "Must securely store and access the Stripe Secret Key (for server) and Publishable Key (for client)"
        missing_consequence: "Cannot authenticate to the Stripe API"
        alternatives: ["secrets_manager", "environment_variables"]
      - component: "server_side_payment_intent_endpoint"
        reason: "Must create the PaymentIntent on the server to specify the amount and currency; this returns a client_secret for the frontend"
        missing_consequence: "Insecure; client-side creation is vulnerable and not recommended"
      - component: "stripe_js_client"
        reason: "Stripe's client-side library (Stripe.js) is required to securely collect card details and confirm the payment using the client_secret"
        missing_consequence: "Handling raw card data is a massive PCI compliance risk; Stripe.js avoids this"
      - component: "webhook_endpoint_for_events"
        reason: "Must listen for asynchronous events (e.g., payment_intent.succeeded, payment_intent.payment_failed) to reliably confirm payment and fulfill the order"
        missing_consequence: "Payment confirmation is unreliable; will miss payments from asynchronous methods (e.g., bank transfers) or if user closes browser"
      - component: "webhook_signature_verification"
        reason: "Must cryptographically verify the signature of incoming webhooks to ensure they are from Stripe and not an attacker"
        missing_consequence: "Critical security vulnerability allowing an attacker to spoof successful payments"
      - component: "tls_security"
        reason: "The entire payment flow must be served over HTTPS"
        missing_consequence: "Insecure, violates PCI compliance, will not work in production"
    optional_dependencies:
      - component: "idempotency_key_handling"
        reason: "To safely retry API requests (e.g., on network failure) without creating duplicate charges"
        missing_consequence: "Potential for double-charging customers"
        adds_dependencies: ["uuid_generation"]
    complexity_score: "critical"
    typical_scope: "v1.0"

  - id: "FDG-010"
    name: "saas_subscription_billing"
    description: "Charge users a recurring fee (monthly/yearly) for service access"
    required_dependencies:
      - component: "payment_gateway_subscription_api"
        reason: "Must use a payment provider that explicitly supports recurring billing and subscription lifecycles"
        missing_consequence: "Cannot automate recurring charges"
        alternatives: ["stripe_billing", "paddle", "chargebee"]
      - component: "subscription_plan_database"
        reason: "Must store the details of available plans (e.g., 'basic', 'pro'), their prices, and feature entitlements"
        missing_consequence: "Cannot manage or display different subscription tiers"
      - component: "user_subscription_status_tracking"
        reason: "Must link a user in the user_database to their current plan, status (active, canceled, trialing), and billing cycle end date"
        missing_consequence: "Cannot determine which users have access to what features"
      - component: "webhook_endpoint_for_events"
        reason: "Critical for handling subscription lifecycle events: invoice.paid (renew access), invoice.payment_failed (start dunning), customer.subscription.deleted (revoke access)"
        missing_consequence: "System is not automated. Users who cancel will still have access; users who fail payment will not be handled"
      - component: "dunning_management"
        reason: "The 'unhappy path' for failed payments. Must have logic to notify users of failed payments and retry the charge"
        missing_consequence: "Losing customers (involuntary churn) due to correctable payment failures"
        alternatives: ["payment_provider_native_dunning", "custom_email_flow"]
    optional_dependencies:
      - component: "usage_metering"
        reason: "For 'pay-as-you-go' or metered billing, must track per-tenant resource consumption"
        adds_dependencies: ["analytics_data_pipeline", "billing_aggregator_job"]
      - component: "coupon_and_discount_engine"
        reason: "Marketing tool to create and manage discount codes"
        adds_dependencies: ["coupon_code_database"]
    complexity_score: "critical"
    typical_scope: "v1.0"

  - id: "FDG-011"
    name: "multi_tenancy_architecture_saas"
    description: "Core architecture for a SaaS app, isolating multiple customers (tenants)"
    required_dependencies:
      - component: "tenant_isolation_strategy"
        reason: "The fundamental architectural choice: how to separate one customer's data and resources from another's"
        missing_consequence: "Massive security breach; tenants can see/corrupt each other's data"
        alternatives: ["database_per_tenant", "shared_database_with_tenant_id_column", "schema_per_tenant"]
      - component: "tenant_database_model"
        reason: "The physical implementation of the isolation strategy. Defines the database structure"
        missing_consequence: "No data separation"
      - component: "tenant_aware_authentication"
        reason: "Auth system must not only identify the user, but also which tenant they belong to"
        missing_consequence: "User is authenticated but has no access; or user has access to the wrong tenant"
        adds_dependencies: ["tenant_id_in_session_or_jwt"]
      - component: "tenant_provisioning_flow"
        reason: "Automated process to create a new tenant's resources (e.g., create database, subdomain, admin user) upon signup"
        missing_consequence: "Manual, slow, and error-prone onboarding for new customers"
    optional_dependencies:
      - component: "subdomain_per_tenant"
        reason: "Provides a clear separation and branding for tenants (e.g., acme.yourapp.com)"
        adds_dependencies: ["wildcard_dns_configuration", "wildcard_tls_certificate", "request_routing_logic"]
      - component: "tenant_usage_tracking"
        reason: "To monitor for 'noisy neighbors' (tenants consuming too many resources) and for metered billing"
        adds_dependencies: ["analytics_pipeline", "resource_monitoring_agent"]
    complexity_score: "critical"
    typical_scope: "v1.0"

  - id: "FDG-012"
    name: "social_media_feed_generation"
    description: "Display a user's 'home' feed based on posts from people they follow"
    required_dependencies:
      - component: "user_service"
        reason: "Manages user authentication and profile data"
        missing_consequence: "Cannot identify the user or their preferences"
      - component: "post_service"
        reason: "Handles the creation, storage, and retrieval of all user-generated posts"
        missing_consequence: "No content exists to create a feed"
      - component: "follower_graph_database"
        reason: "Stores the many-to-many 'follows' relationships between users. This is the core of the social graph"
        missing_consequence: "Cannot determine which posts to show in a user's feed"
        alternatives: ["nosql_graph_db_neo4j", "sql_join_table", "nosql_wide_column_cassandra"]
      - component: "caching_layer"
        reason: "Feeds are read-heavy. Generating a feed by joining tables on-the-fly is not scalable. Feeds must be pre-calculated or heavily cached"
        missing_consequence: "Extremely high database load, very slow feed load times"
        alternatives: ["redis", "memcached"]
      - component: "feed_generation_service"
        reason: "The logic that implements the 'fan-out' strategy (e.g., push-on-write or pull-on-read) to assemble the final feed for a user"
        missing_consequence: "No mechanism to combine posts and follows into a feed"
    optional_dependencies:
      - component: "background_job_processing"
        reason: "For a 'fan-out-on-write' (push) model, a queue is needed to asynchronously deliver a new post to all follower's cached feeds"
        missing_consequence: "Posting will be extremely slow as it blocks on writing to thousands of feeds"
        adds_dependencies: ["message_queue", "background_worker_process"]
      - component: "search_and_ranking_engine"
        reason: "To sort the feed by relevance (algorithmic) instead of just chronologically"
        missing_consequence: "Feed is purely chronological"
        adds_dependencies: ["ml_ranking_model", "analytics_tracking"]
    complexity_score: "critical"
    typical_scope: "v1.0"

  - id: "FDG-013"
    name: "user_post_creation"
    description: "Allow a user to create a new post (e.g., text, image)"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "Must know which user is creating the post"
        missing_consequence: "Cannot attribute the post to a user"
      - component: "post_database"
        reason: "Must have a database (e.g., posts table) to store the post content, timestamp, and user_id"
        missing_consequence: "The post is not saved"
        alternatives: ["sql_database", "nosql_document_database"]
      - component: "input_validation"
        reason: "Must validate post content (e.g., length, format) and prevent XSS attacks"
        missing_consequence: "Security vulnerabilities, broken UI from malformed data"
    optional_dependencies:
      - component: "file_upload_handling"
        reason: "Required if the post includes images or videos"
        missing_consequence: "Can only create text-based posts"
        adds_dependencies: ["file_storage", "cdn_integration"]
      - component: "fan_out_to_followers"
        reason: "The trigger to start the feed generation process for followers"
        missing_consequence: "Post is saved but no one sees it in their feed"
        adds_dependencies: ["background_job_processing", "caching_layer"]
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-014"
    name: "user_comment_on_post"
    description: "Allow users to write a comment on a post"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "Must know which user is commenting"
        missing_consequence: "Cannot attribute the comment"
      - component: "post_database"
        reason: "Must have a post to attach the comment to"
        missing_consequence: "No parent object for the comment"
      - component: "comment_database"
        reason: "Must have a database (e.g., comments table) to store the comment, user_id, and post_id"
        missing_consequence: "Comment is not saved"
        alternatives: ["sql_table_comments"]
      - component: "database_indexing_on_post_id"
        reason: "Must have an index on the post_id foreign key in the comments table, otherwise retrieving comments for a post will be extremely slow (full table scan)"
        missing_consequence: "Very slow performance; database overload as comments grow"
      - component: "input_validation"
        reason: "Must validate comment content for length and prevent XSS"
        missing_consequence: "Security vulnerabilities"
    optional_dependencies:
      - component: "comment_threading_system"
        reason: "To allow replies to other comments (nested comments)"
        missing_consequence: "Comments are a flat list"
        adds_dependencies: ["parent_comment_id_column", "recursive_query_logic"]
      - component: "comment_moderation_system"
        reason: "To flag or automatically hide spam/abusive comments"
        missing_consequence: "High potential for spam and abuse"
        adds_dependencies: ["text_analysis_api", "admin_moderation_ui"]
      - component: "real_time_comment_notification"
        reason: "To notify the post author (and other commenters) of the new comment"
        missing_consequence: "User has to refresh to see new comments"
        adds_dependencies: ["real_time_notification_feed", "webhooks_or_websockets"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-015"
    name: "background_job_processing"
    description: "Perform long-running tasks asynchronously (e.g., send email, process video)"
    required_dependencies:
      - component: "message_queue"
        reason: "Decouples the web application (Producer) from the task (Consumer). It holds the job until a worker is ready, ensuring reliability"
        missing_consequence: "Web request (e.g., user signup) is blocked, slow, and will fail if the task (e.g., email service) is down"
        alternatives: ["rabbitmq", "aws_sqs", "redis_queue", "kafka"]
      - component: "background_worker_process"
        reason: "A separate, scalable process (Consumer) that subscribes to the queue, pulls jobs, and executes the code"
        missing_consequence: "Jobs are added to the queue but never get processed"
        alternatives: ["celery", "sidekiq", "aws_lambda_from_sqs"]
      - component: "job_database_or_store"
        reason: "To store the job definitions, state (pending, running, failed), and results"
        missing_consequence: "Cannot monitor job status or retry failures"
        alternatives: ["redis", "sql_database"]
    optional_dependencies:
      - component: "job_failure_retry_logic"
        reason: "To automatically retry jobs that fail due to temporary issues (e.g., network error)"
        missing_consequence: "Failed jobs are lost forever"
        adds_dependencies: ["exponential_backoff_algorithm"]
      - component: "dead_letter_queue_dlq"
        reason: "A separate queue to move jobs that have repeatedly failed, preventing them from 'poisoning' the main queue"
        missing_consequence: "A single bad job can block all subsequent jobs"
      - component: "job_monitoring_dashboard"
        reason: "A UI to view job status, retry failed jobs, and monitor queue length"
        missing_consequence: "No visibility into the health of the background system"
        alternatives: ["celery_flower", "sidekiq_ui"]
    complexity_score: "high"
    typical_scope: "v1.0_if_core_feature"

  - id: "FDG-016"
    name: "scheduled_task_cron"
    description: "Execute a task on a fixed schedule (e.g., run a report every night at 2 AM)"
    required_dependencies:
      - component: "cron_scheduler_daemon"
        reason: "An OS-level or application-level service that triggers the job based on a time schedule (e.g., '0 2 * * *')"
        missing_consequence: "The job is never triggered automatically"
        alternatives: ["linux_cron", "systemd_timers", "kubernetes_cronjob", "celery_beat"]
      - component: "job_runner_script"
        reason: "The actual code or script that is executed when the scheduler triggers it"
        missing_consequence: "Scheduler triggers, but no work is done"
      - component: "job_logging_output"
        reason: "A mechanism to capture the output (stdout/stderr) or logs from the job, as it runs non-interactively"
        missing_consequence: "Job runs or fails silently with no way to debug"
        alternatives: ["file_logging", "centralized_logging_system"]
    optional_dependencies:
      - component: "job_failure_alerting"
        reason: "To notify an administrator if the scheduled job fails to run or exits with an error"
        missing_consequence: "Critical nightly jobs can fail for days without anyone noticing"
        adds_dependencies: ["monitoring_service", "email_service"]
      - component: "distributed_lock_manager"
        reason: "In a scaled environment, ensures the job only runs on one server, not on all of them simultaneously"
        missing_consequence: "Job runs N times, causing data corruption or duplicate work"
        adds_dependencies: ["redis_lock", "zookeeper"]
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-017"
    name: "real_time_chat_system"
    description: "Allow users to send and receive messages in real-time (1-on-1 or group)"
    required_dependencies:
      - component: "websocket_server"
        reason: "Manages the persistent, bi-directional connection state for all online clients, allowing for instant message push/pull"
        missing_consequence: "Cannot achieve real-time bi-directional communication; fallback to polling is slow and inefficient"
        alternatives: ["socket_io", "ably", "pusher"]
      - component: "message_database"
        reason: "Must persist chat history for users to view past messages and for offline retrieval"
        missing_consequence: "Messages are lost forever after being sent (ephemeral chat)"
        alternatives: ["nosql_wide_column_cassandra", "nosql_document_db", "sql_database"]
      - component: "presence_service"
        reason: "Tracks the online/offline status of users. Must map a user_id to their active WebSocket connection(s)"
        missing_consequence: "Cannot show 'online' status; don't know which users to send messages to directly"
        alternatives: ["redis_pubsub", "redis_hash_map"]
      - component: "message_routing_logic"
        reason: "Server-side logic to take an incoming message from one user and route it to the correct recipient(s)"
        missing_consequence: "Messages are received by the server but not delivered"
      - component: "push_notification_service"
        reason: "If a recipient is offline (no active WebSocket), the only way to notify them of a new message is via a mobile push notification"
        missing_consequence: "Chat is functionally broken for any user whose app is not open"
        adds_dependencies: ["push_notification_system_mobile"]
    optional_dependencies:
      - component: "message_sync_queue"
        reason: "To handle message fan-out in group chats and syncing across multiple user devices"
        missing_consequence: "High server load; messages may not appear on a user's laptop and phone simultaneously"
        adds_dependencies: ["kafka", "rabbitmq"]
      - component: "media_file_storage"
        reason: "To allow users to send images/videos in chat"
        missing_consequence: "Chat is text-only"
        adds_dependencies: ["file_upload_handling", "aws_s3"]
      - component: "read_receipt_system"
        reason: "To show 'Sent', 'Delivered', 'Read' status"
        missing_consequence: "Users do not know if their message was seen"
        adds_dependencies: ["message_status_database"]
    complexity_score: "critical"
    typical_scope: "v1.1_or_v2.0"

  - id: "FDG-018"
    name: "real_time_notification_feed"
    description: "A uni-directional feed of live updates (e.g., 'User X commented on your post')"
    required_dependencies:
      - component: "server_sent_events_endpoint"
        reason: "A lightweight, efficient, HTTP-based protocol for server-to-client (uni-directional) streaming. Simpler than WebSockets for this use case"
        missing_consequence: "Overkill to use WebSockets; fallback to polling is inefficient"
        alternatives: ["websockets", "long_polling"]
      - component: "event_broker_pubsub"
        reason: "A backend messaging system (like Redis Pub/Sub) to broadcast events from different services (e.g., comments, likes) to the SSE endpoint"
        missing_consequence: "The SSE endpoint doesn't know what to send; services are not decoupled"
        alternatives: ["redis_pubsub", "rabbitmq_fanout_exchange"]
      - component: "notification_database"
        reason: "Must persist notifications so users can see a history, not just the real-time push"
        missing_consequence: "Notifications are ephemeral and lost if not seen live"
        alternatives: ["sql_table_notifications", "nosql_document_db"]
      - component: "notification_generation_logic"
        reason: "The business logic that decides when to create a notification (e.g., on comment, on like) and who to send it to"
        missing_consequence: "No notifications are ever created"
    optional_dependencies:
      - component: "notification_read_status"
        reason: "To track which notifications the user has seen (e.g., the red 'unread' badge)"
        missing_consequence: "User sees all notifications as 'new' forever"
        adds_dependencies: ["boolean_read_flag_in_db"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-019"
    name: "push_notification_system_mobile"
    description: "Send native push notifications to iOS and Android devices"
    required_dependencies:
      - component: "platform_notification_service_registration"
        reason: "Must register with Apple (APNs) and Google (FCM/GCM) to get API keys. These are the mandatory, sole-provider gateways"
        missing_consequence: "Fundamentally impossible to send native push notifications"
      - component: "device_token_database"
        reason: "The mobile app must get a unique device token from APNs/FCM upon install and send it to this backend database, linked to a user_id"
        missing_consequence: "The backend has no way to tell Apple/Google which device to send the notification to"
        alternatives: ["sql_table_device_tokens"]
      - component: "notification_aggregation_service"
        reason: "A single backend service (either built or bought) that abstracts the different APNs/FCM APIs into one unified 'send' API"
        missing_consequence: "Redundant, complex code to handle both APNs and FCM protocols separately"
        alternatives: ["aws_sns", "azure_notification_hubs", "firebase_admin_sdk", "custom_backend"]
      - component: "push_notification_trigger"
        reason: "The business logic (e.g., new chat message, new comment) that calls the aggregation service to send a push"
        missing_consequence: "Infrastructure is in place, but no notifications are ever sent"
    optional_dependencies:
      - component: "push_notification_analytics"
        reason: "To track delivery rates and user engagement ('open' rates)"
        missing_consequence: "No insight into notification effectiveness"
        adds_dependencies: ["analytics_tracking_endpoint"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-020"
    name: "full_text_search"
    description: "Provide fast, relevant search over user-generated content or products"
    required_dependencies:
      - component: "search_engine_service"
        reason: "Relational database 'LIKE' queries are not sufficient for full-text search. A specialized engine is required"
        missing_consequence: "Search is slow, irrelevant, or impossible"
        alternatives: ["elasticsearch", "opensearch", "algolia", "meilisearch", "postgres_full_text_search"]
      - component: "data_indexing_pipeline"
        reason: "A process to extract data from the primary database (e.g., products table) and send it to the search engine to be indexed"
        missing_consequence: "Search engine is empty; no data to search over"
        alternatives: ["background_job_on_create_update", "log_streaming", "database_triggers"]
      - component: "search_query_api"
        reason: "An API endpoint that translates a user's search string into the search engine's query language (e.g., Elasticsearch DSL)"
        missing_consequence: "Users cannot perform searches"
    optional_dependencies:
      - component: "query_relevance_tuning"
        reason: "To handle typos, synonyms, and rank results by relevance (e.t., 'best_match') instead of just date"
        missing_consequence: "Search results are basic and often poor"
        adds_dependencies: ["synonym_configuration", "ranking_model"]
      - component: "search_faceting"
        reason: "To allow users to filter search results by a-g, 'price', 'color', 'category'"
        missing_consequence: "Users cannot refine their search"
        adds_dependencies: ["facet_aggregation_query"]
    complexity_score: "high"
    typical_scope: "v1.1_or_v2.0"

  - id: "FDG-021"
    name: "user_analytics_tracking"
    description: "Track user events (e.g., page views, button clicks) for analysis"
    required_dependencies:
      - component: "analytics_client_sdk"
        reason: "A client-side (web/mobile) library to capture and batch events"
        missing_consequence: "No events are captured from the user's device"
        alternatives: ["ga4_client", "amplitude_client", "custom_http_beacon"]
      - component: "analytics_ingestion_pipeline"
        reason: "A high-throughput system to receive and queue massive volumes of events"
        missing_consequence: "Event tracking API is overwhelmed and drops data"
        alternatives: ["kafka", "aws_kinesis", "analytics_provider_endpoint"]
      - component: "analytics_database"
        reason: "A database optimized for analytical queries (OLAP) to store and aggregate event data"
        missing_consequence: "Data is collected but cannot be queried efficiently"
        alternatives: ["data_warehouse_snowflake", "data_warehouse_bigquery", "clickhouse"]
    optional_dependencies:
      - component: "data_visualization_tool"
        reason: "A dashboard or UI to build reports and graphs from the analytics data"
        missing_consequence: "Data is in the database but is inaccessible to business users"
        alternatives: ["metabase", "looker", "tableau"]
      - component: "data_etl_process"
        reason: "To 'Extract, Transform, Load' raw event data into clean, aggregated tables for reporting"
        missing_consequence: "Reports are slow; data is raw and hard to query"
        adds_dependencies: ["apache_spark", "dbt"]
    complexity_score: "critical"
    typical_scope: "v1.1"

  - id: "FDG-022"
    name: "centralized_logging_system"
    description: "Aggregate logs from all services and servers into one place for debugging"
    required_dependencies:
      - component: "log_collection_agent"
        reason: "A service that runs on each server/container to collect log files (e.g., stdout, /var/log) and forward them"
        missing_consequence: "Logs remain siloed on individual machines; impossible to debug distributed systems"
        alternatives: ["fluentd", "filebeat", "rsyslog"]
      - component: "log_aggregation_service"
        reason: "A central service that receives, parses, and buffers incoming log streams from all agents"
        missing_consequence: "Log agents have no destination to send data to"
        alternatives: ["logstash", "fluent_bit", "aws_kinesis_firehose"]
      - component: "log_datastore"
        reason: "A database optimized for storing and searching massive volumes of text data (logs)"
        missing_consequence: "Logs are collected but not stored or searchable"
        alternatives: ["elasticsearch", "opensearch", "loki", "splunk"]
      - component: "log_visualization_ui"
        reason: "A dashboard UI for searching, filtering, and visualizing the aggregated logs"
        missing_consequence: "Logs are stored but inaccessible to developers"
        alternatives: ["kibana", "grafana", "splunk_ui"]
    optional_dependencies:
      - component: "log_alerting_system"
        reason: "To automatically send alerts (e.g., to Slack, PagerDuty) when a high volume of errors is detected"
        missing_consequence: "Team must manually check logs to find problems"
        adds_dependencies: ["alertmanager", "elastalert"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-023"
    name: "system_monitoring_metrics"
    description: "Collect and visualize time-series metrics (e.g., CPU, memory, request latency)"
    required_dependencies:
      - component: "metrics_collection_agent"
        reason: "A service or library that exposes metrics from applications and infrastructure (e.g., a Prometheus exporter)"
        missing_consequence: "No metrics are generated"
        alternatives: ["prometheus_exporter", "newrelic_agent", "datadog_agent"]
      - component: "metrics_scraping_service"
        reason: "A service that periodically 'scrapes' the metrics endpoints and stores them"
        missing_consequence: "Metrics are exposed but not collected"
        alternatives: ["prometheus_server", "victoriametrics"]
      - component: "time_series_database_tsdb"
        reason: "A database specifically optimized for storing and querying time-stamped metric data"
        missing_consequence: "Using a standard SQL/NoSQL DB is highly inefficient and will not scale"
        alternatives: ["prometheus_tsdb", "influxdb", "timescaledb"]
      - component: "metrics_visualization_ui"
        reason: "A dashboard UI for building graphs and charts from the time-series data"
        missing_consequence: "Metrics are stored but cannot be seen"
        alternatives: ["grafana", "prometheus_ui"]
    optional_dependencies:
      - component: "metrics_alerting_system"
        reason: "To define rules (e.g., 'CPU > 90% for 5 min') and send alerts"
        missing_consequence: "Team must manually watch dashboards to find problems"
        adds_dependencies: ["alertmanager"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-024"
    name: "database_backup_and_recovery"
    description: "Regularly back up the primary database and have a plan to restore it"
    required_dependencies:
      - component: "backup_scheduler"
        reason: "A process to automate the database backup (e.g., daily snapshot)"
        missing_consequence: "Backups are manual, forgotten, and inconsistent"
        alternatives: ["cron_job", "managed_db_backup_service"]
      - component: "backup_storage_location"
        reason: "A secure, durable, and separate location (e.g., cloud storage) to store the backup files"
        missing_consequence: "Backups stored on the same server are useless if the server fails"
        alternatives: ["aws_s3", "google_cloud_storage", "offline_storage"]
      - component: "recovery_testing_procedure"
        reason: "A documented and tested process for restoring the backup. A backup is useless if it cannot be restored"
        missing_consequence: "Catastrophic data loss; discovering backups are corrupt or the restore process fails during a real disaster"
    optional_dependencies:
      - component: "point_in_time_recovery_pitr"
        reason: "To restore the database to a specific second (e.g., 5 min before a major error), not just the last nightly backup"
        missing_consequence: "Can lose up to 24 hours of data"
        adds_dependencies: ["transaction_log_archiving"]
      - component: "cross_region_replication"
        reason: "For disaster recovery, copies backups to a different geographical region"
        missing_consequence: "A region-wide outage (e.g., fire, earthquake) destroys the app and its backups"
        adds_dependencies: ["s3_cross_region_replication"]
    complexity_score: "critical"
    typical_scope: "v1.0"

  - id: "FDG-025"
    name: "financial_transaction_ledger"
    description: "A system of record for tracking all money movement (debits/credits) using double-entry accounting"
    required_dependencies:
      - component: "double_entry_accounting_model"
        reason: "Every transaction must have at least two entries (a debit and a credit) that sum to zero. This ensures money is not created or destroyed"
        missing_consequence: "Financial data is unreliable, unbalanced, and unauditable. Leads to catastrophic financial errors."
      - component: "immutable_ledger_database"
        reason: "Transactions must be append-only. Mistakes are fixed by adding a new, reversing transaction. Data can never be updated or deleted"
        missing_consequence: "No audit trail; breaks financial compliance; allows fraudulent data tampering"
        alternatives: ["aws_qldb", "ms_sql_ledger_tables", "custom_append_only_table"]
      - component: "idempotency_handling"
        reason: "Must prevent duplicate transactions (e.g., from a network retry). The system must recognize it has seen a transaction ID before"
        missing_consequence: "Double-charging or double-crediting accounts"
        alternatives: ["unique_transaction_id_constraint"]
      - component: "concurrency_controls"
        reason: "Must handle simultaneous requests to the same account without data corruption (e.g., using database locks or transactional integrity)"
        missing_consequence: "Race conditions leading to incorrect account balances"
        alternatives: ["sql_transactions_serializable", "optimistic_locking"]
    optional_dependencies:
      - component: "audit_trail_api"
        reason: "An API to allow auditors or external systems to cryptographically verify the integrity of the ledger"
        missing_consequence: "Auditing is a manual, difficult process"
    complexity_score: "critical"
    typical_scope: "v1.0_if_fintech"

  - id: "FDG-026"
    name: "api_rate_limiting"
    description: "Limit the number of requests a user or IP can make to an API in a given time"
    required_dependencies:
      - component: "distributed_counter_store"
        reason: "In a scaled, multi-server environment, a central store (like Redis) is required to track request counts. In-memory counters are useless"
        missing_consequence: "Rate limit is (N * servers), not N. A 100-request-limit on 10 servers is a 1000-request-limit."
        alternatives: ["redis", "memcached"]
      - component: "rate_limiting_algorithm"
        reason: "The logic for tracking and limiting requests"
        missing_consequence: "No limiting occurs"
        alternatives: ["token_bucket", "leaky_bucket", "fixed_window_counter", "sliding_window_log"]
      - component: "rate_limit_placement"
        reason: "The architectural layer where the limit is enforced"
        missing_consequence: "Limit is enforced too late, still overwhelming the system"
        alternatives: ["api_gateway", "load_balancer", "application_middleware"]
      - component: "client_identifier"
        reason: "The key to track requests against"
        missing_consequence: "Cannot distinguish between different clients"
        alternatives: ["ip_address", "user_id", "api_key"]
    optional_dependencies: []
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-027"
    name: "user_invitations_to_team"
    description: "Allow a user to invite a new member to their team/organization via email"
    required_dependencies:
      - component: "email_service"
        reason: "Must send the invitation link to the new member's email address"
        missing_consequence: "User cannot receive the invitation"
        alternatives: ["sendgrid", "mailgun", "aws_ses"]
      - component: "secure_token_generation"
        reason: "Must create a secure, random, single-use token for the invitation link"
        missing_consequence: "Attacker could guess invitation links and join private teams"
        alternatives: ["uuid_v4", "crypto_random_bytes"]
      - component: "invitation_storage"
        reason: "Must store the token (hashed), the inviter's ID, the team ID, and the invitee's email, plus an expiration date"
        missing_consequence: "Cannot validate the invitation link or assign the user to the correct team"
        alternatives: ["sql_table_invitations"]
      - component: "invitation_status_tracking"
        reason: "Must track the state of the invitation (pending, accepted, expired) to prevent reuse"
        missing_consequence: "A single link could be used multiple times"
    optional_dependencies:
      - component: "rate_limiting"
        reason: "To prevent a user from spamming invitations"
        missing_consequence: "Potential for abuse and spam"
        adds_dependencies: ["ip_based_limiting"]
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-028"
    name: "user_role_based_access_control_rbac"
    description: "Implement different permission levels for users (e.g., Admin, Member, Guest)"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "Must know who a user is before you can determine what they can do"
        missing_consequence: "No user to assign a role to"
      - component: "role_definition_store"
        reason: "A database to store the available roles and their associated permissions (e.g., Role 'Admin' has Permission 'delete_user')"
        missing_consequence: "Roles are hard-coded and inflexible"
        alternatives: ["sql_table_roles", "sql_table_permissions", "sql_table_role_permissions"]
      - component: "user_role_mapping"
        reason: "A database table to link a user_id to a role_id (and often a tenant_id in SaaS)"
        missing_consequence: "Cannot assign roles to users"
        alternatives: ["sql_table_user_roles"]
      - component: "authorization_logic"
        reason: "Code (e.g., middleware, function checks) that enforces permissions by checking the user's roles before allowing an action"
        missing_consequence: "Roles are assigned, but the system doesn't enforce them. All users are effectively admins."
        alternatives: ["middleware_check", "policy_engine"]
    optional_dependencies:
      - component: "permission_grouping"
        reason: "To group permissions into logical sets for easier management"
        missing_consequence: "Admins must assign dozens of individual permissions"
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-029"
    name: "async_video_processing"
    description: "Transcode user-uploaded videos into different formats and resolutions"
    required_dependencies:
      - component: "file_upload_handling"
        reason: "Must first receive the raw video file from the user"
        missing_consequence: "No video to process"
        adds_dependencies: ["raw_file_storage_bucket"]
      - component: "background_job_processing"
        reason: "Video transcoding is extremely slow (can take minutes/hours) and must not run in the web request. It must be an asynchronous job"
        missing_consequence: "Web request will time out; server will crash"
        adds_dependencies: ["message_queue", "background_worker_process"]
      - component: "video_transcoding_service"
        reason: "The actual tool or service that performs the transcoding (e.GOOD, ffmpeg)"
        missing_consequence: "Job is picked up, but no work is done"
        alternatives: ["ffmpeg_library", "aws_elastic_transcoder", "aws_media_convert"]
      - component: "processed_file_storage"
        reason: "A separate storage location (e.g., S3 bucket) to store the resulting transcoded files (e.g.,.mp4,.hls)"
        missing_consequence: "Video is processed, but files are lost"
        alternatives: ["aws_s3_bucket_processed"]
      - component: "job_status_tracking"
        reason: "Must update the database (e.g., videos table) with the job status (pending, processing, complete, failed)"
        missing_consequence: "UI cannot show the user if their video is ready"
    optional_dependencies:
      - component: "cdn_integration"
        reason: "To serve the processed video files quickly to end-users"
        missing_consequence: "Video streaming will be slow and expensive"
        adds_dependencies: ["aws_cloudfront"]
    complexity_score: "critical"
    typical_scope: "v1.1_or_v2.0"

  - id: "FDG-030"
    name: "async_report_generation"
    description: "Generate a large data report (e.g., CSV, PDF) in the background"
    required_dependencies:
      - component: "background_job_processing"
        reason: "Report generation is database-intensive and slow. It must run asynchronously"
        missing_consequence: "Web request will time out; high database load"
        adds_dependencies: ["message_queue", "background_worker_process"]
      - component: "report_generation_library"
        reason: "The tool or library to create the file (e.g., PDFKit, CSV writer)"
        missing_consequence: "Cannot create the report file"
        alternatives: ["csv_writer", "pdf_generator"]
      - component: "file_storage"
        reason: "A place to store the generated report file for the user to download"
        missing_consequence: "Report is generated but cannot be delivered"
        alternatives: ["aws_s3", "google_cloud_storage"]
      - component: "job_status_notification"
        reason: "A way to notify the user that their report is ready (e.g., email, real-time notification)"
        missing_consequence: "User has to manually check if the report is done"
        alternatives: ["email_service", "real_time_notification_feed"]
    optional_dependencies: []
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-031"
    name: "user_search_autocomplete"
    description: "Provide real-time suggestions as a user types in a search box"
    required_dependencies:
      - component: "search_engine_service"
        reason: "Requires a specialized search engine optimized for fast, prefix-based matching"
        missing_consequence: "Cannot provide instant results; database queries are too slow"
        alternatives: ["elasticsearch_completion_suggester", "algolia", "redis_search"]
      - component: "data_indexing_pipeline"
        reason: "Must feed the searchable data (e.g., user names, product names) into the search engine"
        missing_consequence: "No data to search"
      - component: "autocomplete_api_endpoint"
        reason: "A low-latency API endpoint that the frontend can hit on every keystroke"
        missing_consequence: "Frontend cannot fetch suggestions"
    optional_dependencies: []
    complexity_score: "high"
    typical_scope: "v2.0"

  - id: "FDG-032"
    name: "email_sending_transactional"
    description: "Send a single, triggered email (e.g., welcome email, receipt)"
    required_dependencies:
      - component: "email_service_provider"
        reason: "Sending from your own server IP leads to spam folders. A 3rd-party (e.g., SendGrid) is required for deliverability"
        missing_consequence: "Emails are not delivered or go to spam"
        alternatives: ["sendgrid", "mailgun", "aws_ses", "postmark"]
      - component: "domain_authentication_dkim_spf"
        reason: "Must configure DNS records (DKIM, SPF) to prove to receivers that you authorize the at_service to send on your behalf"
        missing_consequence: "Emails will be rejected as spam/phishing"
      - component: "email_queue"
        reason: "Sending email is a slow, blocking, external API call. It must be done asynchronously via a message queue to avoid slowing down the main application"
        missing_consequence: "User signup (or other trigger) is slow and will fail if the email API is down"
        adds_dependencies: ["background_job_processing"]
      - component: "email_templates"
        reason: "To separate email content (HTML/text) from application logic"
        missing_consequence: "Hard-coded email strings; difficult to maintain"
    optional_dependencies:
      - component: "bounce_handling"
        reason: "Must have a mechanism (e.g., webhook) to process bounce/spam reports and stop sending to invalid addresses"
        missing_consequence: "Poor sender reputation, eventual blacklisting"
        adds_dependencies: ["webhook_endpoint_for_events"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-033"
    name: "sms_sending_transactional"
    description: "Send a single, triggered SMS (e.g., 2FA code, order update)"
    required_dependencies:
      - component: "sms_gateway_provider"
        reason: "Must use a 3rd-party service (e.g., Twilio) to send SMS messages via the global telecommunications network"
        missing_consequence: "Cannot send SMS"
        alternatives: ["twilio", "vonage", "aws_sns"]
      - component: "api_credentials_management"
        reason: "Must securely store the provider's API keys/tokens"
        missing_consequence: "Cannot authenticate to the SMS API"
        alternatives: ["secrets_manager"]
      - component: "sms_queue"
        reason: "SMS API calls are external and blocking. They should be sent via a background job for reliability"
        missing_consequence: "Main application thread blocks, slowing down the user request"
        adds_dependencies: ["background_job_processing"]
      - component: "regulatory_compliance_handling"
        reason: "SMS is highly regulated (e.g., A2P 10DLC in US). Must comply with regional laws and number provisioning rules"
        missing_consequence: "Messages are blocked by carriers; legal fines"
    optional_dependencies:
      - component: "sms_status_callback"
        reason: "To receive delivery status (sent, delivered, failed) via webhook"
        missing_consequence: "No way to know if the SMS was delivered"
        adds_dependencies: ["webhook_endpoint_for_events"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-034"
    name: "social_api_integration_posting"
    description: "Post content on behalf of a user to a 3rd-party social network (e.g., Twitter, Facebook)"
    required_dependencies:
      - component: "user_authentication_oauth"
        reason: "Must use OAuth to get permission (e.g., write scope) from the user to post on their behalf"
        missing_consequence: "No authorization to post"
        adds_dependencies: ["oauth_provider_registration", "token_exchange_endpoint"]
      - component: "oauth_token_storage"
        reason: "Must securely store the user's access_token and refresh_token to make API calls in the future"
        missing_consequence: "Cannot post on the user's behalf after they log off"
        alternatives: ["encrypted_database", "secrets_manager"]
      - component: "social_api_client"
        reason: "The client library or HTTP logic to make the 'create post' API call to the specific provider"
        missing_consequence: "Cannot communicate with the social platform"
        alternatives: ["provider_sdk", "custom_http_client"]
      - component: "rate_limit_handling"
        reason: "All social APIs have strict rate limits. The application must track and respect these limits"
        missing_consequence: "Application's API key is blocked for abuse"
    optional_dependencies:
      - component: "token_refresh_logic"
        reason: "Access tokens expire. A background job is needed to use the refresh_token to get a new access_token"
        missing_consequence: "Posting fails after the token expires"
        adds_dependencies: ["scheduled_task_cron"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-035"
    name: "database_sql"
    description: "A standard relational database (e.g., PostgreSQL, MySQL) for structured data"
    required_dependencies:
      - component: "database_server"
        reason: "The running database process (e.g., Postgres)"
        missing_consequence: "No database to connect to"
        alternatives: ["postgresql", "mysql", "ms_sql_server", "aws_rds"]
      - component: "database_schema_definition"
        reason: "SQL databases require a predefined schema (tables, columns, types) before data can be stored"
        missing_consequence: "Cannot store data"
    optional_dependencies:
      - component: "database_migration_tool"
        reason: "To manage and version changes to the schema over time"
        missing_consequence: "Schema changes are manual, error-prone, and break deployments"
        adds_dependencies: ["alembic", "flyway", "django_migrations"]
      - component: "database_indexing"
        reason: "To improve query performance on large tables"
        missing_consequence: "Slow queries"
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-036"
    name: "database_nosql_document"
    description: "A NoSQL document database (e.g., MongoDB) for semi-structured data"
    required_dependencies:
      - component: "database_server"
        reason: "The running database process (e.g., MongoDB)"
        missing_consequence: "No database to connect to"
        alternatives: ["mongodb", "aws_documentdb"]
      - component: "data_access_pattern_definition"
        reason: "NoSQL flexibility requires defining how you will query the data upfront, as this determines how you structure (denormalize) it"
        missing_consequence: "Poor performance; 'flexible schema' leads to unmanageable data"
    optional_dependencies: []
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-037"
    name: "caching_layer_redis"
    description: "Use Redis as a fast, in-memory cache to reduce database load"
    required_dependencies:
      - component: "redis_server"
        reason: "The running Redis instance"
        missing_consequence: "No cache to connect to"
        alternatives: ["redis_standalone", "aws_elasticache"]
      - component: "redis_client_library"
        reason: "The application code needs a client driver to speak the Redis protocol"
        missing_consequence: "Cannot connect to Redis"
      - component: "cache_invalidation_strategy"
        reason: "A defined plan for how data is added and removed from the cache to prevent stale data"
        missing_consequence: "Stale data; users see old information"
        alternatives: ["cache_aside_lazy_loading", "write_through", "ttl_expiration"]
    optional_dependencies: []
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-038"
    name: "api_gateway"
    description: "A single, unified entry point for all backend services and APIs"
    required_dependencies:
      - component: "service_routing"
        reason: "The core task: route incoming requests (e.g., /api/v1/users/) to the correct internal service (e.g., user-service)"
        missing_consequence: "Clients must know the address of every individual microservice"
        alternatives: ["aws_api_gateway", "kong", "tyk"]
      - component: "request_authentication"
        reason: "The gateway is the ideal place to terminate authentication (e.t., validate JWT, check API key) before forwarding to a trusted internal service"
        missing_consequence: "Every single microservice must re-implement authentication"
        alternatives: ["jwt_validation", "api_key_check"]
    optional_dependencies:
      - component: "api_rate_limiting"
        reason: "Enforce rate limits at the edge, protecting all upstream services"
        missing_consequence: "Services are vulnerable to DoS or high-load"
        adds_dependencies: ["distributed_counter_store"]
      - component: "request_logging_and_tracing"
        reason: "Central place to log all incoming requests and add a correlation ID for distributed tracing"
        missing_consequence: "Difficult to debug requests across microservices"
        adds_dependencies: ["centralized_logging_system"]
      - component: "response_caching"
        reason: "To cache common GET request responses at the edge"
        missing_consequence: "Higher load on backend services"
        adds_dependencies: ["redis"]
    complexity_score: "high"
    typical_scope: "v1.1_for_microservices"

  - id: "FDG-039"
    name: "feature_flag_system"
    description: "Toggle features on/off in production without deploying new code"
    required_dependencies:
      - component: "feature_flag_management_service"
        reason: "A central service (e.g., LaunchDarkly, or a simple database) to store the state of all flags"
        missing_consequence: "No way to toggle the flag"
        alternatives: ["launchdarkly", "statsig", "unleash", "database_table"]
      - component: "feature_flag_sdk"
        reason: "A client library in the application that fetches flag states from the management service and provides the if(feature.isEnabled('...')) logic"
        missing_consequence: "Application code cannot check the state of a flag"
    optional_dependencies:
      - component: "flag_dependency_rules"
        reason: "To create rules like 'feature B can only be on if feature A is also on'"
        missing_consequence: "Can lead to inconsistent states"
      - component: "user_segment_targeting"
        reason: "To roll out features to specific segments (e.g., '10% of users', 'users in Germany', 'beta_testers')"
        missing_consequence: "Flags are all-or-nothing (on/off for everyone)"
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-040"
    name: "audit_logging"
    description: "An immutable, chronological log of all significant actions taken by users"
    required_dependencies:
      - component: "audit_log_storage"
        reason: "A secure, append-only store to record what action was taken, who took it, when, and from what IP"
        missing_consequence: "No accountability; cannot answer 'who deleted that customer?'"
        alternatives: ["dedicated_sql_table", "aws_qldb", "log_aggregation_service"]
      - component: "audit_log_trigger"
        reason: "Logic within the application's critical paths (e.g., 'delete_user', 'update_billing') that fires the audit log event"
        missing_consequence: "Log storage exists, but no events are ever written to it"
        alternatives: ["application_middleware", "database_triggers"]
    optional_dependencies:
      - component: "audit_log_viewer_ui"
        reason: "A UI for administrators to search and review the audit logs"
        missing_consequence: "Logs are inaccessible"
        adds_dependencies: []
    complexity_score: "medium"
    typical_scope: "v1.1_for_enterprise"

  - id: "FDG-041"
    name: "database_indexing"
    description: "Add database indexes to speed up query performance"
    required_dependencies:
      - component: "sql_database"
        reason: "Indexing is a feature of database systems to optimize data retrieval"
        missing_consequence: "No database to index"
        alternatives: ["postgresql", "mysql"]
      - component: "query_analysis"
        reason: "Cannot create useful indexes without analyzing the application's queries (e.g., WHERE, JOIN, ORDER BY clauses)"
        missing_consequence: "Indexes are created on the wrong columns, wasting space and slowing down writes, with no read benefit"
    optional_dependencies: []
    complexity_score: "low"
    typical_scope: "v1.1"

  - id: "FDG-042"
    name: "content_delivery_network_cdn"
    description: "Use a CDN to cache and serve static assets (e.g., JS, CSS, images)"
    required_dependencies:
      - component: "cdn_provider"
        reason: "The 3rd-party service that provides the globally distributed edge network"
        missing_consequence: "No CDN"
        alternatives: ["aws_cloudfront", "cloudflare", "fastly"]
      - component: "origin_server"
        reason: "The server (e.g., your web app or S3 bucket) that holds the original copy of the assets for the CDN to pull from"
        missing_consequence: "CDN has no content to cache"
        alternatives: ["aws_s3", "web_server"]
      - component: "dns_configuration"
        reason: "Must configure DNS (e.g., CNAME) to point your asset domain (e.g., static.yourapp.com) to the CDN provider's address"
        missing_consequence: "Assets are not served through the CDN"
    optional_dependencies:
      - component: "cache_invalidation_logic"
        reason: "A way to tell the CDN to purge a file (e.g., style.css) when you deploy a new version"
        missing_consequence: "Users see old, cached assets"
        alternatives: ["versioned_filenames", "cdn_api_invalidation"]
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-043"
    name: "webhook_handling_endpoint"
    description: "An API endpoint designed to receive asynchronous events from a 3rd party (e.g., Stripe, SendGrid)"
    required_dependencies:
      - component: "public_api_endpoint"
        reason: "A publicly accessible URL for the 3rd-party service to send HTTP POST requests to"
        missing_consequence: "3rd party cannot send events"
      - component: "idempotency_handling"
        reason: "Webhook providers often send the same event multiple times (e.g., on network failure). The endpoint must be able to process the same event ID twice without duplicate work"
        missing_consequence: "Duplicate data (e.g., two subscriptions created, two 'thank you' emails sent)"
        alternatives: ["processed_event_id_cache"]
      - component: "fast_response_logic"
        reason: "The endpoint must respond with a 200 OK immediately and then process the data in the background (using a queue)"
        missing_consequence: "Provider's request times out; they assume the hook failed and keep retrying, leading to a DoS"
        adds_dependencies: ["background_job_processing"]
    optional_dependencies:
      - component: "webhook_signature_verification"
        reason: "To cryptographically verify the incoming request is actually from the e_provider and not an attacker"
        missing_consequence: "Critical security vulnerability; attacker can spoof any event"
        adds_dependencies: ["shared_secret_management"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-044"
    name: "user_authentication_magic_link"
    description: "Allow users to log in by clicking a single-use link in their email"
    required_dependencies:
      - component: "user_database"
        reason: "Must look up the user by their email address"
        missing_consequence: "Cannot identify who to send the link to"
      - component: "email_service"
        reason: "Must send the magic link to the user's email"
        missing_consequence: "User cannot receive the link"
        alternatives: ["sendgrid", "postmark"]
      - component: "secure_token_generation"
        reason: "Must create a secure, random, single-use, short-lived token for the login link"
        missing_consequence: "Account takeover vulnerability"
      - component: "token_storage_and_validation"
        reason: "Must store the token (hashed) with a user_id and expiration to validate it when the user clicks the link"
        missing_consequence: "Cannot verify the link"
        alternatives: ["redis_with_ttl"]
      - component: "session_issuance_endpoint"
        reason: "The endpoint the link points to. If the token is valid, this endpoint deletes the token and issues a new session for the user"
        missing_consequence: "User clicks link, but nothing happens"
    optional_dependencies:
      - component: "rate_limiting"
        reason: "Prevent attackers from flooding a user's email with login links"
        missing_consequence: "Spam/DoS vulnerability"
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-045"
    name: "sso_authentication_saml"
    description: "Allow enterprise users to log in via their company's Identity Provider (e.g., Okta, ADFS)"
    required_dependencies:
      - component: "identity_provider_idp_configuration"
        reason: "The customer's SSO provider (e.g., Okta) which authenticates the user"
        missing_consequence: "No source of authentication"
        alternatives: ["okta", "azure_ad", "adfs"]
      - component: "service_provider_sp_logic"
        reason: "The application (Service Provider) must be able to generate a SAML auth request (AuthnRequest) and send it to the IdP"
        missing_consequence: "Cannot initiate the login flow"
        alternatives: ["saml_library"]
      - component: "assertion_consumer_service_acs_endpoint"
        reason: "A public endpoint on the application (/saml/acs) that receives the signed SAML assertion (the user's identity) from the IdP"
        missing_consequence: "IdP cannot send the authenticated user back to the application"
      - component: "certificate_management"
        reason: "Must use X.509 certificates to verify the signature of the IdP's assertion and to sign its own requests"
        missing_consequence: "Cannot verify identity; security vulnerability"
      - component: "user_profile_mapping_jit"
        reason: "Logic to map attributes from the SAML assertion (e.g., email, name) to a local user account, often creating it 'Just-In-Time' (JIT)"
        missing_consequence: "User is authenticated, but the app doesn't know who they are"
    optional_dependencies:
      - component: "single_logout_slo"
        reason: "A flow to log the user out of both the app and the IdP simultaneously"
        missing_consequence: "User logs out of app but is still logged in to the IdP"
        adds_dependencies: ["slo_endpoint"]
    complexity_score: "critical"
    typical_scope: "v1.1_for_enterprise"

  - id: "FDG-046"
    name: "product_reviews_and_ratings"
    description: "Allow users to leave a star rating and written review on a product"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "Must know which user is leaving the review (prevents anonymous spam)"
        missing_consequence: "No accountability for reviews"
      - component: "product_catalog"
        reason: "Must have a product to attach the review to"
        missing_consequence: "No parent object for the review"
      - component: "review_database"
        reason: "Must have a database (e.g., reviews table) to store the user_id, product_id, rating (1-5), and text"
        missing_consequence: "Review is not saved"
      - component: "duplicate_review_prevention"
        reason: "Logic (e.g., unique constraint on user_id+product_id) to prevent a user from reviewing the same product multiple times"
        missing_consequence: "A single user can spam a product with 1000s of reviews"
    optional_dependencies:
      - component: "review_moderation_system"
        reason: "An admin UI to approve, reject, or hide reviews that violate policy"
        missing_consequence: "Spam and abuse are publicly visible"
        adds_dependencies: ["admin_dashboard"]
      - component: "aggregate_rating_calculation"
        reason: "A background job or trigger to update the product's average rating (e.g., '4.5 stars') after each new review"
        missing_consequence: "Product's star rating is not visible or is calculated on-the-fly (slow)"
        adds_dependencies: ["denormalized_column_on_product_table", "database_trigger"]
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-047"
    name: "product_recommendations_engine"
    description: "Show users 'products you may also like' based on behavior"
    required_dependencies:
      - component: "user_analytics_tracking"
        reason: "Must track user behavior (e.g., 'product_viewed', 'added_to_cart', 'purchased') to feed the recommendation model"
        missing_consequence: "No data to base recommendations on"
        adds_dependencies: ["analytics_ingestion_pipeline"]
      - component: "recommendation_model"
        reason: "The algorithm (e.g., collaborative filtering, content-based) that processes behavior data and generates product recommendations"
        missing_consequence: "No recommendations are generated"
        alternatives: ["ml_model_offline_training", "real_time_recommendation_api"]
      - component: "recommendation_storage"
        reason: "A fast-lookup store (e.g., Redis) to hold the pre-calculated recommendations (e.g., 'for user 123, recommend products A, B, C')"
        missing_consequence: "Cannot serve recommendations in real-time"
        alternatives: ["redis", "nosql_keyvalue_store"]
    optional_dependencies:
      - component: "offline_model_training_job"
        reason: "A scheduled (e.g., nightly) background job to retrain the ML model on new user behavior data"
        missing_consequence: "Recommendations become stale and irrelevant"
        adds_dependencies: ["scheduled_task_cron", "data_science_platform"]
    complexity_score: "critical"
    typical_scope: "v2.0"

  - id: "FDG-048"
    name: "inventory_tracking"
    description: "Track product stock levels and prevent overselling"
    required_dependencies:
      - component: "transactional_sql_db"
        reason: "Inventory requires high consistency and ACID-compliant transactions to prevent race conditions (e.g., two people buying the last item)"
        missing_consequence: "Data corruption, overselling, incorrect stock counts"
        alternatives: ["postgresql", "mysql"]
      - component: "inventory_ledger_table"
        reason: "A database table (e.g., inventory_levels) with a product_id and quantity column"
        missing_consequence: "No place to store stock counts"
      - component: "atomic_decrement_logic"
        reason: "Must use a transaction (e.g., UPDATE... SET quantity = quantity - 1 WHERE quantity > 0) to claim stock atomically during checkout"
        missing_consequence: "Race conditions; two servers could both read '1 item left' and sell it twice"
        alternatives: ["database_transaction", "select_for_update"]
    optional_dependencies:
      - component: "inventory_admin_ui"
        reason: "A UI for staff to manually adjust stock levels (e.t., 'new shipment arrived')"
        missing_consequence: "Stock levels can only be changed via database"
        adds_dependencies: ["admin_dashboard"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-049"
    name: "discount_code_engine"
    description: "Allow users to apply a discount code (e.g., 'SAVE10') in the cart"
    required_dependencies:
      - component: "shopping_cart"
        reason: "Must have a cart (with items and a subtotal) to apply the discount to"
        missing_consequence: "No context for the discount"
      - component: "discount_code_database"
        reason: "A database to store codes,their type (e.g., percent, fixed_amount), value, and rules (e.g., expiration, min_purchase)"
        missing_consequence: "Cannot validate codes or apply their effects"
      - component: "discount_validation_logic"
        reason: "The business logic in the checkout/cart API that validates the code and recalculates the cart total"
        missing_consequence: "User enters code, but nothing happens"
    optional_dependencies:
      - component: "single_use_code_tracking"
        reason: "To prevent a 'single-use' code from being used multiple times"
        missing_consequence: "Code abuse"
        adds_dependencies: ["usage_tracking_table"]
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-050"
    name: "shipping_label_generation"
    description: "Automatically generate a shipping label (e.g., UPS, FedEx) when an order is packed"
    required_dependencies:
      - component: "order_management_system"
        reason: "Must have a completed order with a shipping address"
        missing_consequence: "No address or order details to create a label"
      - component: "shipping_carrier_api"
        reason: "Must integrate with a shipping provider's API (e.g., UPS, FedEx) or an aggregator (e.g., EasyPost) to generate the label and get a tracking number"
        missing_consequence: "Cannot generate a valid label"
        alternatives: ["easypost", "shippo", "ups_api"]
      - component: "label_storage"
        reason: "Must store the generated label file (e.g., PDF, ZPL) so it can be printed"
        missing_consequence: "Label is generated but lost"
        alternatives: ["aws_s3"]
    optional_dependencies: []
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-051"
    name: "tenant_onboarding"
    description: "The process of signing up a new customer (tenant) for a SaaS product"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "To create the first 'admin' user for the new tenant"
        missing_consequence: "Tenant is created, but no one can log into it"
      - component: "multi_tenancy_architecture_saas"
        reason: "Provides the underlying structure (e.g., tenant table) to link the new user to"
        missing_consequence: "No 'tenant' entity to create"
      - component: "tenant_provisioning_flow"
        reason: "The automated script that creates the tenant's resources (e.g., adds a row to the tenant table, creates a schema, creates a database)"
        missing_consequence: "Signup is a manual process"
    optional_dependencies:
      - component: "saas_subscription_billing"
        reason: "To require payment (e.g., credit card) as part of the onboarding flow"
        missing_consequence: "Onboarding is free"
        adds_dependencies: ["payment_gateway"]
      - component: "subdomain_provisioning"
        reason: "To automatically assign or create a unique subdomain for the new tenant"
        missing_consequence: "All tenants use the main domain"
        adds_dependencies: ["wildcard_dns_configuration"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-052"
    name: "admin_dashboard"
    description: "A central internal UI for administrators to manage the application (e.g., users, content, orders)"
    required_dependencies:
      - component: "user_role_based_access_control_rbac"
        reason: "Must have a way to identify users as 'Admins' and restrict access to the dashboard"
        missing_consequence: "Any user can access the admin panel; critical security flaw"
      - component: "admin_api_endpoints"
        reason: "Separate, secure API endpoints for admin actions (e.g., POST /admin/users/delete, GET /admin/orders)"
        missing_consequence: "No way for the admin UI to perform actions"
      - component: "admin_ui_frontend"
        reason: "The web interface (e.g., React app) that consumes the admin APIs"
        missing_consequence: "No admin dashboard"
        alternatives: ["react_admin", "custom_frontend"]
    optional_dependencies:
      - component: "analytics_database"
        reason: "To display charts and metrics about application health or business KPIs"
        missing_consequence: "Dashboard only shows raw data tables"
        adds_dependencies: ["data_visualization_tool"]
      - component: "audit_logging"
        reason: "To log all actions taken by administrators for accountability"
        missing_consequence: "An admin can delete data, and no one knows who did it"
        adds_dependencies: ["audit_log_storage"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-053"
    name: "user_follow_system"
    description: "Allow a user to 'follow' another user to see their content"
    required_dependencies:
      - component: "follower_graph_database"
        reason: "Must have a database table (e.g., follow_relationships) to store the follower_id and followed_id pairs"
        missing_consequence: "Cannot store follow relationships"
        alternatives: ["sql_join_table", "nosql_graph_db"]
      - component: "user_authentication_basic"
        reason: "Must know which user is initiating the follow"
        missing_consequence: "Cannot create the relationship"
    optional_dependencies:
      - component: "social_media_feed_generation"
        reason: "The 'follow' action is the trigger to update the user's home feed"
        missing_consequence: "Following a user does nothing"
        adds_dependencies: ["caching_layer", "fan_out_logic"]
      - component: "real_time_notification_feed"
        reason: "To notify the followed_id user that 'User X is now following you'"
        missing_consequence: "No notification of new followers"
        adds_dependencies: ["notification_database"]
    complexity_score: "medium"
    typical_scope: "v1.0"

  - id: "FDG-054"
    name: "user_block_system"
    description: "Allow a user to 'block' another user, preventing interaction"
    required_dependencies:
      - component: "block_list_database"
        reason: "Must have a database table to store the blocker_id and blocked_id pairs"
        missing_consequence: "Cannot store block relationships"
        alternatives: ["sql_join_table"]
      - component: "user_authentication_basic"
        reason: "Must know which user is initiating the block"
        missing_consequence: "Cannot create the relationship"
      - component: "application_logic_enforcement"
        reason: "All application logic (e.g., view profile, send message, view comment) must be updated to check the block list first"
        missing_consequence: "Block is stored in the DB, but the application ignores it. Blocking fails."
    optional_dependencies: []
    complexity_score: "medium"
    typical_scope: "v1.1"

  - id: "FDG-055"
    name: "content_management_system_headless"
    description: "A system for editors to create and manage content, delivered via an API"
    required_dependencies:
      - component: "content_database"
        reason: "A database (often NoSQL) to store flexible content 'models' or 'schemas' (e.g., a 'blog_post' has 'title', 'author', 'body')"
        missing_consequence: "No content to manage"
        alternatives: ["nosql_document_db", "sql_with_jsonb"]
      - component: "content_authoring_interface"
        reason: "A secure, admin-only web application for non-technical users (editors) to create, edit, and publish content"
        missing_consequence: "Content can only be edited in the database"
        alternatives: ["strapi", "contentful", "sanity", "custom_admin_ui"]
      - component: "content_delivery_api"
        reason: "The core of 'headless': a public-facing API (e.g., REST, GraphQL) that the frontend (web/mobile) calls to fetch published content"
        missing_consequence: "Content is created but cannot be consumed"
        alternatives: ["graphql_api", "rest_api"]
      - component: "user_authentication_cms"
        reason: "An authentication system for the editors and admins to access the authoring interface"
        missing_consequence: "Anyone can edit content"
    optional_dependencies:
      - component: "asset_storage"
        reason: "To handle image and file uploads for content"
        missing_consequence: "Content is text-only"
        adds_dependencies: ["file_upload_handling", "aws_s3"]
      - component: "content_preview_system"
        reason: "To allow editors to see a 'draft' of their content on the real frontend before publishing"
        missing_consequence: "Editors must 'publish to see'"
        adds_dependencies: ["draft_content_api_mode", "webhook_trigger"]
      - component: "cdn_integration"
        reason: "To cache the content delivery API responses for high performance"
        missing_consequence: "High database load on the CMS"
        adds_dependencies: ["cache_invalidation_logic"]
    complexity_score: "high"
    typical_scope: "v1.0"

  - id: "FDG-056"
    name: "real_time_live_location_tracking"
    description: "Track a user's location (e.g., delivery driver) and display it on a map in real-time"
    required_dependencies:
      - component: "mobile_gps_client"
        reason: "A mobile app with permission to read the device's GPS coordinates and send them to the server"
        missing_consequence: "No location data to track"
      - component: "location_ingestion_endpoint"
        reason: "A high-throughput API endpoint to receive the frequent (e.g., every 5 sec) location updates"
        missing_consequence: "Cannot receive data"
        alternatives: ["http_api", "mqtt_broker"]
      - component: "real_time_broadcast_service"
        reason: "A service to broadcast the received location data to the viewers (e.g., the customer watching the map)"
        missing_consequence: "Driver's location is saved, but customer map is not live"
        alternatives: ["websocket_server", "redis_pubsub", "aws_iot_core"]
      - component: "location_database_current"
        reason: "A fast, low-latency store (e.g., Redis) to hold only the current location of all active drivers"
        missing_consequence: "Cannot quickly get the current state"
        alternatives: ["redis_geospatial"]
    optional_dependencies:
      - component: "location_history_database"
        reason: "To store the full history of all location data for later analysis"
        missing_consequence: "Only the last known location is stored"
        adds_dependencies: ["time_series_database_tsdb"]
    complexity_score: "critical"
    typical_scope: "v2.0"

  - id: "FDG-057"
    name: "real_time_collaborative_editing"
    description: "Allow multiple users to edit the same document at the same time (e.g., Google Docs)"
    required_dependencies:
      - component: "websocket_server"
        reason: "Requires a persistent, bi-directional, low-latency connection to sync changes (deltas) between all connected clients"
        missing_consequence: "Cannot sync changes in real-time"
      - component: "conflict_resolution_algorithm"
        reason: "The core logic (e.g., CRDT, OT) that ensures all users converge on the same document state, even if they make conflicting edits simultaneously"
        missing_consequence: "Document becomes corrupt and out-of-sync"
        alternatives: ["crdt_operational_transformation"]
      - component: "document_state_server"
        reason: "A server-side process that holds the 'true' state of the document and resolves conflicts"
        missing_consequence: "No central authority for document state"
      - component: "document_database"
        reason: "To persist the document's content"
        missing_consequence: "Document is lost when all users disconnect"
    optional_dependencies:
      - component: "presence_service"
        reason: "To show who is currently viewing/editing the document"
        missing_consequence: "Cannot see other collaborators' cursors"
        adds_dependencies: ["redis"]
    complexity_score: "critical"
    typical_scope: "v2.0+"

  - id: "FDG-058"
    name: "user_authentication_2fa_totp"
    description: "Add Two-Factor Authentication using an Authenticator App (e.g., Google Authenticator)"
    required_dependencies:
      - component: "user_authentication_basic"
        reason: "2FA requires a primary authentication method"
        missing_consequence: "No first factor to secure"
      - component: "totp_library"
        reason: "A library to generate the shared secret, create the QR code, and validate the time-based codes"
        missing_consequence: "Cannot implement the TOTP protocol"
        alternatives: ["rfc_6238_library"]
      - component: "secret_key_storage"
        reason: "Must securely store the user's unique TOTP shared secret in the user_database (encrypted)"
        missing_consequence: "Cannot validate the codes the user provides"
      - component: "code_validation_logic"
        reason: "Logic to check the user's submitted 6-digit code against the stored secret, accounting for time drift"
        missing_consequence: "User cannot log in"
    optional_dependencies:
      - component: "recovery_code_system"
        reason: "Provides a backup method for users who lose their authenticator device"
        missing_consequence: "User is permanently locked out"
        adds_dependencies: ["one_time_use_code_database"]
    complexity_score: "high"
    typical_scope: "v1.1"

  - id: "FDG-059"
    name: "usage_metering"
    description: "Track per-tenant/per-user consumption of a resource (e.g., API calls, storage)"
    required_dependencies:
      - component: "analytics_ingestion_pipeline"
        reason: "A high-throughput pipeline to receive usage events (e.g., '1 API call used', '10MB stored')"
        missing_consequence: "Cannot track usage in real-time"
        alternatives: ["kafka", "aws_sqs"]
      - component: "usage_aggregator_job"
        reason: "A background job (streaming or batch) that aggregates raw usage events into billable totals (e.g., 'User 123 used 5000 API calls this_month')"
        missing_consequence: "Usage is tracked but not summarized for billing"
        alternatives: ["scheduled_task_cron", "streaming_processor_flink"]
      - component: "usage_database"
        reason: "A database to store the aggregated usage totals per tenant"
        missing_consequence: "No record of usage"
        alternatives: ["time_series_database_tsdb", "sql_database"]
    optional_dependencies:
      - component: "saas_subscription_billing"
        reason: "To automatically charge the user based on their metered usage"
        missing_consequence: "Usage is tracked but not billed"
        adds_dependencies: ["payment_gateway_subscription_api"]
    complexity_score: "high"
    typical_scope: "v1.1_for_saas"

  - id: "FDG-060"
    name: "i18n_localization"
    description: "Translate the application UI and content into multiple languages"
    required_dependencies:
      - component: "translation_key_store"
        reason: "A file or database (e.g., en.json, es.json) that stores the mapping of a key (e.g., 'GREETING') to its translation ('Hello', 'Hola')"
        missing_consequence: "No translations available"
        alternatives: ["json_files", "database_table"]
      - component: "i18n_client_library"
        reason: "A library (e.t., i18next) in the frontend that handles loading the correct translation file and replacing keys with strings"
        missing_consequence: "UI shows 'GREETING' instead of 'Hello'"
        alternatives: ["i18next", "react_intl"]
      - component: "user_locale_detection"
        reason: "A mechanism to determine which language to show the user"
        missing_consequence: "App defaults to one language"
        alternatives: ["browser_header_detection", "user_profile_setting", "url_path_e.g_app_com_es"]
    optional_dependencies:
      - component: "translation_management_service"
        reason: "A 3rd-party service to manage the translation workflow with professional translators"
        missing_consequence: "Translations are managed in JSON files by developers"
        alternatives: ["lokalise", "phrase"]
    complexity_score: "medium"
    typical_scope: "v2.0"

---

# SECTION 2: Feature Category Patterns

category_patterns:
  - category: "e_commerce"
    description: "An online store for selling physical or digital goods"
    core_features_required:
      - "product_catalog"
      - "shopping_cart"
      - "checkout_process"
      - "payment_processing"
      - "order_management_system"
    implied_dependencies:
      - "inventory_tracking"
      - "tax_calculation_service"
      - "shipping_integration"
      - "customer_database"
      - "transactional_email_service"
      - "database_backup_and_recovery"

  - category: "saas_platform"
    description: "A business-to-business (B2B) Software-as-a-Service application"
    core_features_required:
      - "user_authentication_basic"
      - "saas_subscription_billing"
      - "admin_dashboard"
      - "user_role_based_access_control_rbac"
    implied_dependencies:
      - "multi_tenancy_architecture_saas"
      - "tenant_isolation_strategy"
      - "tenant_provisioning_flow"
      - "payment_gateway"
      - "email_notifications"
      - "analytics_system"
      - "audit_logging"

  - category: "social_platform"
    description: "A platform for users to connect and share content (e.g., Twitter, Facebook)"
    core_features_required:
      - "user_authentication_oauth"
      - "user_profile_photo_upload"
      - "user_post_creation"
      - "social_media_feed_generation"
      - "user_follow_system"
    implied_dependencies:
      - "caching_layer"
      - "fan_out_logic_queue"
      - "file_storage"
      - "cdn_integration"
      - "real_time_notification_feed"
      - "content_moderation_system"
      - "user_block_system"

  - category: "marketplace_platform"
    description: "A two-sided platform connecting buyers and sellers (e.g., eBay, Airbnb)"
    core_features_required:
      - "seller_user_authentication"
      - "buyer_user_authentication"
      - "product_catalog_by_seller"
      - "shopping_cart"
      - "payment_processing"
    implied_dependencies:
      - "seller_payout_system"
      - "commission_engine"
      - "seller_verification_flow"
      - "product_reviews_and_ratings"
      - "dispute_resolution_system"
      - "financial_transaction_ledger"

  - category: "content_management_system_headless"
    description: "A backend for creating and managing content, served via API"
    core_features_required:
      - "content_authoring_interface"
      - "content_delivery_api"
      - "content_database"
      - "user_authentication_cms"
    implied_dependencies:
      - "asset_storage"
      - "cdn_integration"
      - "content_preview_system"
      - "user_role_based_access_control_rbac"

  - category: "mobile_app_backend"
    description: "A backend server specifically to support an iOS or Android application"
    core_features_required:
      - "user_authentication_oauth"
      - "api_gateway"
      - "user_database"
    implied_dependencies:
      - "push_notification_system_mobile"
      - "analytics_service"
      - "api_versioning_strategy"
      - "offline_sync_support"
      - "cdn_integration"

  - category: "real_time_chat_application"
    description: "A dedicated chat application (e.g., WhatsApp, Slack)"
    core_features_required:
      - "user_authentication_basic"
      - "real_time_chat_system"
      - "user_profile_management"
    implied_dependencies:
      - "websocket_server"
      - "presence_service"
      - "message_database"
      - "push_notification_system_mobile"
      - "media_file_storage"
      - "read_receipt_system"
      - "user_block_system"

  - category: "analytics_platform"
    description: "A platform for ingesting, processing, and visualizing large volumes of data"
    core_features_required:
      - "user_analytics_tracking"
      - "data_visualization_tool"
      - "admin_dashboard"
    implied_dependencies:
      - "analytics_ingestion_pipeline"
      - "analytics_database"
      - "data_etl_process"
      - "report_generation"
      - "data_access_controls"

  - category: "iot_platform"
    description: "A platform to manage and receive data from physical IoT devices"
    core_features_required:
      - "device_registration_system"
      - "data_ingestion_endpoint"
      - "device_management_dashboard"
    implied_dependencies:
      - "mqtt_broker"
      - "time_series_database_tsdb"
      - "rules_engine"
      - "device_authentication"
      - "device_shadow_state"
      - "firmware_ota_update_system"

  - category: "booking_system"
    description: "A system for booking time-based resources (e.g., hotels, appointments, tickets)"
    core_features_required:
      - "resource_inventory_database"
      - "calendar_view"
      - "booking_creation_flow"
      - "payment_processing"
    implied_dependencies:
      - "availability_check_logic"
      - "concurrency_controls"
      - "transactional_sql_db"
      - "email_sending_transactional"
      - "cancellation_flow"

---

# SECTION 3: Technology-Specific Dependencies

technology_dependencies:
  - technology: "oauth_social_login"
    description: "Using a 3rd party (e.g., Google) for login"
    adds_dependencies:
      - "oauth_provider_registration"
      - "redirect_uri_handling"
      - "token_exchange_endpoint"
      - "user_profile_mapping"
      - "client_secret_management"
    common_gotchas:
      - "Must handle failed auth flows or user-denied permissions"
      - "Must store the provider's unique user ID and map it to your local user"
      - "The client_secret must never be exposed in client-side code"

  - technology: "stripe_payment_processing"
    description: "Using Stripe for payments"
    adds_dependencies:
      - "stripe_api_keys_management"
      - "webhook_endpoint_for_events"
      - "server_side_payment_intent_endpoint"
      - "stripe_js_client"
      - "webhook_signature_verification"
    common_gotchas:
      - "Must verify webhook signatures; failure to do so is a critical vulnerability"
      - "Must handle idempotency to prevent double charges"
      - "Must rely on webhooks for payment confirmation, not the client-side callback"

  - technology: "jwt_authentication"
    description: "Using JSON Web Tokens for session management"
    adds_dependencies:
      - "token_signing_key_management"
      - "token_expiration_handling"
      - "refresh_token_flow"
      - "token_revocation_strategy"
      - "token_storage_client_side"
    common_gotchas:
      - "JWTs are not 'stateless' if you need to log a user out. This requires a token_revocation_strategy (e.g., a Redis blocklist), which re-introduces state"
      - "Storing sensitive user data in the JWT payload (it's readable by anyone)"
      - "Forgetting to handle token refresh, logging users out too quickly"

  - technology: "server_side_sessions"
    description: "Using traditional stateful sessions (e.g., via Cookies)"
    adds_dependencies:
      - "session_id_cookie_management"
      - "session_store_database"
      - "cookie_signing_secret"
    common_gotchas:
      - "Does not scale horizontally without a centralized session_store_database (like Redis)"
      - "Default in-memory session store is only for development and fails in production"

  - technology: "celery_task_queue"
    description: "Using Celery for background job processing"
    adds_dependencies:
      - "message_broker_dependency"
      - "result_backend"
      - "worker_monitoring_tool"
      - "python_environment"
    common_gotchas:
      - "Celery is a task executor, not a broker. It requires a separate message broker (like RabbitMQ or Redis) to function"
      - "The default setting acks_late=False can cause jobs to be lost if a worker crashes mid-task"
      - "Not configuring a dead_letter_queue for 'poison pill' messages"

  - technology: "rabbitmq_broker"
    description: "Using RabbitMQ as a message broker"
    adds_dependencies:
      - "rabbitmq_server_cluster"
      - "amqp_client_library"
      - "exchange_and_queue_definitions"
      - "persistent_message_configuration"
    common_gotchas:
      - "Forgetting to declare queues as durable=True and messages as persistent, causing message loss on broker restart"
      - "Using the wrong exchange type (e.g., fanout vs topic) for the use case"

  - technology: "redis_caching"
    description: "Using Redis as a key-value cache"
    adds_dependencies:
      - "redis_server"
      - "cache_invalidation_strategy"
      - "redis_client_library"
      - "connection_pooling"
    common_gotchas:
      - "Using the cache-aside (lazy loading) pattern without a TTL, leading to stale data"
      - "Not setting a max memory limit or eviction policy, leading to OOM (Out Of Memory) errors"
      - "Using one Redis DB for both cache and sessions; flushing the cache (DB 0) accidentally logs out all users"

  - technology: "redis_pubsub"
    description: "Using Redis Pub/Sub for real-time messaging"
    adds_dependencies:
      - "redis_server"
      - "publisher_logic"
      - "subscriber_logic"
    common_gotchas:
      - "Redis Pub/Sub is 'fire and forget'. If a subscriber is not connected, it misses the message. It does not queue."
      - "Not suitable for durable, guaranteed message delivery (use RabbitMQ or Kafka for that)"

  - technology: "memcached_caching"
    description: "Using Memcached as a key-value cache"
    adds_dependencies:
      - "memcached_server_cluster"
      - "cache_invalidation_strategy"
      - "memcached_client_library"
    common_gotchas:
      - "Memcached is not persistent. All data is lost on restart (this is by design)"
      - "Lacks the advanced data structures (lists, sets) of Redis"

  - technology: "websocket_connection"
    description: "Using WebSockets for bi-directional real-time communication"
    adds_dependencies:
      - "websocket_server"
      - "connection_state_management"
      - "load_balancer_with_sticky_sessions"
      - "heartbeat_protocol"
      - "auto_reconnect_client_logic"
    common_gotchas:
      - "WebSockets are stateful, which breaks simple horizontal scaling. Requires sticky_sessions on the load balancer or a message bus (like Redis Pub/Sub) to broadcast messages between servers"
      - "Proxies, firewalls, and corporate networks often block ws:// connections"

  - technology: "server_sent_events"
    description: "Using SSE for uni-directional (server-to-client) real-time updates"
    adds_dependencies:
      - "http_endpoint_with_keep_alive"
      - "event_broker_backend"
      - "automatic_reconnection_handling"
    common_gotchas:
      - "Is uni-directional only (server-to-client). Cannot be used for chat."
      - "More proxy-friendly than WebSockets, as it's just a long-lived HTTP request"

  - technology: "aws_s3_file_storage"
    description: "Using AWS S3 for object storage"
    adds_dependencies:
      - "s3_bucket"
      - "iam_policy_for_permissions"
      - "aws_sdk"
      - "cdn_integration"
      - "cors_configuration"
    common_gotchas:
      - "Making buckets public by default; a massive, common security vulnerability"
      - "Forgetting to configure CORS on the bucket, which blocks the frontend from uploading/downloading"
      - "Not setting up lifecycle policies to move old files to cheaper storage (e.g., Glacier)"

  - technology: "local_filesystem_storage"
    description: "Storing uploaded files on the server's local disk"
    adds_dependencies:
      - "file_directory_path"
      - "server_write_permissions"
    common_gotchas:
      - "This pattern does not scale. In a multi-server, load-balanced environment, a file uploaded to Server A will not exist on Server B, leading to 404s"
      - "Files are lost if the server is destroyed (e.g., auto-scaling-down)"
      - "Fills up the server's disk, crashing the application"

  - technology: "sql_database_postgres"
    description: "Using PostgreSQL as the primary RDBMS"
    adds_dependencies:
      - "database_server"
      - "database_schema_definition"
      - "database_migration_tool"
      - "database_backup_and_recovery"
    common_gotchas:
      - "Forgetting to add indexes for foreign keys and WHERE clauses, leading to slow queries"
      - "Using a single large instance (vertical scaling) instead of read replicas (horizontal scaling)"

  - technology: "nosql_database_mongodb"
    description: "Using MongoDB as the primary document database"
    adds_dependencies:
      - "database_server"
      - "data_access_pattern_definition"
      - "database_backup_and_recovery"
    common_gotchas:
      - "Assuming 'schemaless' means 'no schema'. Still requires a well-designed application-level schema"
      - "Not designing document structure based on queries, leading to slow performance"

  - technology: "nosql_database_keyvalue_redis"
    description: "Using Redis as a primary Key-Value database (not just cache)"
    adds_dependencies:
      - "redis_server"
      - "redis_client_library"
      - "redis_data_persistence_config"
    common_gotchas:
      - "By default, Redis persistence (snapshots) can lose the last few seconds/minutes of data. Must configure AOF (Append Only File) for stronger durability"
      - "Data must fit in RAM. It is a memory-first database"

  - technology: "nosql_database_keyvalue_dynamodb"
    description: "Using AWS DynamoDB as a managed Key-Value database"
    adds_dependencies:
      - "aws_sdk"
      - "iam_policy_for_permissions"
      - "on_demand_or_provisioned_capacity"
      - "primary_key_design"
    common_gotchas:
      - "The primary_key design (Partition Key, Sort Key) is the most critical decision and very hard to change. All access patterns depend on it."
      - "Not understanding Read/Write Capacity Units (RCUs/WCUs) leads to unexpected throttling or high costs"

  - technology: "sendgrid_email_api"
    description: "Using SendGrid for transactional email"
    adds_dependencies:
      - "sendgrid_api_key_management"
      - "domain_authentication_dkim_spf"
      - "email_queue"
      - "bounce_handling_webhook"
    common_gotchas:
      - "Not setting up domain authentication (DKIM/SPF). This is not optional; without it, emails go to spam."
      - "Calling the API directly from the web request, which is slow and unreliable"

  - technology: "twilio_sms_api"
    description: "Using Twilio for transactional SMS"
    adds_dependencies:
      - "twilio_account_sid_and_auth_token"
      - "sms_queue"
      - "regulatory_compliance_handling"
      - "phone_number_provisioning"
    common_gotchas:
      - "Forgetting about SMS regulations (e.g., A2P 10DLC, TCPA), which is a legal and compliance dependency"
      - "Hard-coding 'from' numbers; must use a provisioned Twilio number"

  - technology: "docker_containerization"
    description: "Packaging the application as a Docker container"
    adds_dependencies:
      - "dockerfile"
      - "container_registry"
      - "docker_base_image"
    common_gotchas:
      - "Running the container as the root user, which is a security risk"
      - "Not managing secrets properly; baking API_KEYs into the image"
      - "Using a large base image (e.g., python:latest) instead of a slim/alpine one"

  - technology: "kubernetes_orchestration"
    description: "Using Kubernetes (K8s) to manage containers"
    adds_dependencies:
      - "kubernetes_cluster"
      - "docker_containerization"
      - "kubernetes_deployment_manifests"
      - "kubernetes_service_manifests"
      - "ingress_controller"
    common_gotchas:
      - "Massive complexity. Often adopted too early."
      - "Not understanding K8s networking (Services, Ingress, CNI)"
      - "Not setting resource limits/requests, leading to 'noisy neighbors' or node crashes"

  - technology: "aws_lambda_serverless"
    description: "Using AWS Lambda for serverless functions"
    adds_dependencies:
      - "lambda_function_handler"
      - "iam_role_for_execution"
      - "event_source_trigger"
      - "deployment_package_zip"
    common_gotchas:
      - "Not understanding 'cold starts' (latency on first invocation)"
      - "Hitting API limits for downstream services (e.g., database connections) due to high concurrency"
      - "Functions timing out (max 15 min execution)"

---

# SECTION 4: Infrastructure Dependencies

infrastructure_requirements:
  - feature: "file_upload_handling"
    infrastructure_needs:
      - component: "file_storage"
        options: ["aws_s3", "google_cloud_storage", "azure_blob_storage", "local_filesystem"]
        v1_recommendation: "aws_s3"
        reason: "Local filesystem does not scale beyond one server"
      - component: "file_type_validation"
        reason: "Security: prevent executable uploads"
      - component: "file_size_validation"
        reason: "Cost/Abuse: prevent large file uploads"
      - component: "virus_scanning"
        reason: "Security: prevent malware propagation"
        v1_optional: true

  - feature: "email_sending"
    infrastructure_needs:
      - component: "email_service_provider"
        options: ["sendgrid", "mailgun", "aws_ses", "postmark"]
        v1_recommendation: "sendgrid"
        reason: "Required for deliverability; sending from server IP goes to spam"
      - component: "email_queue"
        options: ["rabbitmq", "redis_queue", "aws_sqs"]
        v1_recommendation: "redis_queue"
        reason: "Decouples slow email API calls from the main application thread"
      - component: "domain_authentication_dns"
        options: ["spf_record", "dkim_record"]
        v1_recommendation: "spf_record"
        reason: "Proves you are authorized to send email for your domain"
      - component: "bounce_handling_webhook"
        reason: "To process bounces and protect sender reputation"
        v1_optional: true

  - feature: "sms_sending"
    infrastructure_needs:
      - component: "sms_gateway_provider"
        options: ["twilio", "vonage", "aws_sns"]
        v1_recommendation: "twilio"
        reason: "Connects to the global telecommunications network"
      - component: "sms_queue"
        options: ["rabbitmq", "redis_queue", "aws_sqs"]
        v1_recommendation: "redis_queue"
        reason: "Decouples slow SMS API calls from the main application"
      - component: "regulatory_compliance"
        reason: "Required for A2P 10DLC (US) and other regional laws"
        v1_optional: false

  - feature: "database_backups"
    infrastructure_needs:
      - component: "backup_storage"
        options: ["aws_s3", "google_cloud_storage", "local_disk_separate"]
        v1_recommendation: "aws_s3"
        reason: "Must be a separate, durable location"
      - component: "backup_scheduler"
        options: ["cron_job", "managed_db_service"]
        v1_recommendation: "managed_db_service"
        reason: "Automates the backup process"
      - component: "recovery_testing_procedure"
        reason: "A backup is useless unless it is tested"
        v1_optional: false

  - feature: "centralized_logging"
    infrastructure_needs:
      - component: "log_collection_agent"
        options: ["fluentd", "filebeat", "rsyslog"]
        v1_recommendation: "filebeat"
        reason: "Collects logs from all running services"
      - component: "log_aggregation_datastore"
        options: ["elk_stack", "loki", "datadog", "splunk"]
        v1_recommendation: "elk_stack"
        reason: "A central, searchable database for logs"
      - component: "log_visualization_ui"
        options: ["kibana", "grafana", "splunk_ui"]
        v1_recommendation: "kibana"
        reason: "A UI to search and visualize logs"

  - feature: "system_monitoring_metrics"
    infrastructure_needs:
      - component: "metrics_time_series_database"
        options: ["prometheus", "influxdb", "graphite"]
        v1_recommendation: "prometheus"
        reason: "Stores time-series data (CPU, RAM, latency)"
      - component: "metrics_collection_agent"
        options: ["prometheus_exporters", "telegraf", "datadog_agent"]
        v1_recommendation: "prometheus_exporters"
        reason: "Exposes metrics from applications and servers"
      - component: "metrics_visualization_ui"
        options: ["grafana", "prometheus_ui"]
        v1_recommendation: "grafana"
        reason: "A UI to build dashboards and graphs"

  - feature: "api_rate_limiting"
    infrastructure_needs:
      - component: "distributed_counter_store"
        options: ["redis", "memcached"]
        v1_recommendation: "redis"
        reason: "Required for a consistent, central counter in a scaled environment"
      - component: "enforcement_layer"
        options: ["api_gateway", "load_balancer", "application_middleware"]
        v1_recommendation: "api_gateway"
        reason: "The layer that actually rejects the request"

  - feature: "api_gateway"
    infrastructure_needs:
      - component: "gateway_service"
        options: ["aws_api_gateway", "kong", "tyk", "nginx_plus"]
        v1_recommendation: "aws_api_gateway"
        reason: "The central proxy for all API traffic"
      - component: "service_discovery_mechanism"
        reason: "To know where to route traffic for internal services"
        v1_optional: true

  - feature: "load_balancing"
    infrastructure_needs:
      - component: "load_balancer"
        options: ["aws_alb", "nginx", "haproxy"]
        v1_recommendation: "aws_alb"
        reason: "Distributes incoming traffic across multiple servers"
      - component: "health_check_endpoint"
        reason: "The load balancer needs a URL (e.g., /healthz) to check if a server is alive"
        v1_optional: false

  - feature: "cdn_static_assets"
    infrastructure_needs:
      - component: "cdn_provider"
        options: ["aws_cloudfront", "cloudflare", "fastly"]
        v1_recommendation: "aws_cloudfront"
        reason: "Caches static content (JS, CSS, images) at the edge"
      - component: "origin_server"
        options: ["aws_s3", "web_server"]
        v1_recommendation: "aws_s3"
        reason: "The source of truth for the CDN"

  - feature: "database_replication"
    infrastructure_needs:
      - component: "primary_database"
        options: ["aws_rds_primary", "postgresql_primary"]
        v1_recommendation: "aws_rds_primary"
        reason: "The main 'write' database"
      - component: "read_replica_database"
        options: ["aws_rds_replica", "postgresql_streaming_replica"]
        v1_recommendation: "aws_rds_replica"
        reason: "A read-only copy of the data to scale read requests"
      - component: "replication_logic"
        reason: "The mechanism (e.g., log-shipping) to keep the replica in sync"
        v1_optional: false

  - feature: "database_sharding"
    infrastructure_needs:
      - component: "sharding_key"
        reason: "The column (e.g., tenant_id, user_id) used to decide which shard (database) data lives on"
        v1_optional: false
      - component: "sharding_router_logic"
        reason: "Application logic that routes a query to the correct database shard"
        v1_optional: false
      - component: "multiple_database_servers"
        reason: "The physical database instances that hold the sharded data"
        v1_optional: false

  - feature: "secrets_management"
    infrastructure_needs:
      - component: "secrets_vault"
        options: ["aws_secrets_manager", "hashicorp_vault", "environment_variables"]
        v1_recommendation: "aws_secrets_manager"
        reason: "Securely store API keys, database passwords, and client secrets"
      - component: "iam_policy"
        reason: "To control which services/servers are allowed to retrieve which secrets"
        v1_optional: false

  - feature: "tls_ssl_termination"
    infrastructure_needs:
      - component: "tls_certificate"
        options: ["lets_encrypt", "aws_acm", "commercial_ca"]
        v1_recommendation: "aws_acm"
        reason: "Required for HTTPS"
      - component: "termination_layer"
        options: ["load_balancer", "api_gateway", "web_server_nginx"]
        v1_recommendation: "load_balancer"
        reason: "The layer that decrypts HTTPS traffic before sending to app"

  - feature: "vpc_private_networking"
    infrastructure_needs:
      - component: "virtual_private_cloud"
        options: ["aws_vpc", "azure_vnet"]
        v1_recommendation: "aws_vpc"
        reason: "A private network to isolate resources (like the DB) from the public internet"
      - component: "subnets"
        options: ["public_subnet", "private_subnet"]
        v1_recommendation: "public_subnet"
        reason: "To separate internet-facing (e.g., web) from internal (e.g., DB) resources"
      - component: "security_groups_firewall"
        reason: "Rules to control traffic between resources (e.g., 'Allow web server to talk to DB on port 5432')"

  - feature: "disaster_recovery_plan"
    infrastructure_needs:
      - component: "database_backup_and_recovery"
        reason: "Must be able to restore data"
        v1_optional: false
      - component: "infrastructure_as_code_iac"
        options: ["terraform", "aws_cloudformation"]
        v1_recommendation: "terraform"
        reason: "Ability to quickly rebuild the infrastructure (servers, networks) from code"
      - component: "cross_region_replication"
        reason: "To survive a full data-center failure"
        v1_optional: true

  - feature: "ci_cd_pipeline"
    infrastructure_needs:
      - component: "source_control_system"
        options: ["git", "github", "gitlab"]
        v1_recommendation: "github"
        reason: "The source of truth for all code"
      - component: "build_server"
        options: ["github_actions", "jenkins", "gitlab_ci"]
        v1_recommendation: "github_actions"
        reason: "To run tests, build artifacts (e.g., Docker images), and deploy"
      - component: "artifact_registry"
        options: ["docker_hub", "aws_ecr", "github_packages"]
        v1_recommendation: "aws_ecr"
        reason: "To store the built, versioned artifacts"

  - feature: "http_caching_static"
    infrastructure_needs:
      - component: "cdn_provider"
        options: ["aws_cloudfront", "cloudflare", "fastly"]
        v1_recommendation: "cloudflare"
        reason: "Caches static files (JS, CSS) at edge locations"
      - component: "cache_control_headers"
        reason: "HTTP headers (Cache-Control, ETag) from the origin server to tell the CDN how to cache"
        v1_optional: false

  - feature: "http_caching_dynamic"
    infrastructure_needs:
      - component: "in_memory_cache"
        options: ["redis", "memcached"]
        v1_recommendation: "redis"
        reason: "To cache database query results or API responses"
      - component: "cache_invalidation_strategy"
        reason: "A plan (e.g., TTL, write-through) to remove stale data"
        v1_optional: false

  - feature: "container_orchestration"
    infrastructure_needs:
      - component: "orchestrator"
        options: ["kubernetes", "aws_ecs", "docker_swarm"]
        v1_recommendation: "kubernetes"
        reason: "Manages the lifecycle (scaling, health) of containers"
      - component: "container_registry"
        options: ["aws_ecr", "docker_hub"]
        v1_recommendation: "aws_ecr"
        reason: "The source of the container images"
      - component: "containerization"
        options: ["docker"]
        v1_recommendation: "docker"
        reason: "The application must first be packaged as a container"

---

# SECTION 5: Common Forgotten Dependencies

often_forgotten:
  - feature: "password_reset"
    description: "Seems simple, but is a multi-step, security-critical flow"
    forgotten_dependencies:
      - "email_service"
      - "secure_token_generation"
      - "token_expiration_logic"
      - "rate_limiting_reset_requests"
      - "hashed_token_storage"

  - feature: "user_profile_photos"
    description: "Not just a file upload; it's a media processing pipeline"
    forgotten_dependencies:
      - "image_upload_handling"
      - "image_resizing_service"
      - "thumbnail_generation"
      - "background_job_processing"
      - "cdn_or_cache"
      - "default_avatar_fallback"

  - feature: "user_invitations_to_team"
    description: "Architecturally identical to 'password_reset' but often overlooked"
    forgotten_dependencies:
      - "email_service"
      - "secure_token_generation"
      - "token_expiration_logic"
      - "invitation_status_tracking_db"

  - feature: "subscription_billing"
    description: "The 'happy path' is easy; the 'unhappy path' (failures) is the real feature"
    forgotten_dependencies:
      - "dunning_management"
      - "webhook_endpoint_for_events"
      - "subscription_lifecycle_management"
      - "proration_logic_for_upgrades"

  - feature: "feature_flags"
    description: "Not just an if statement; it's a full management system"
    forgotten_dependencies:
      - "feature_flag_management_ui"
      - "flag_dependency_rules"
      - "sdk_integration"
      - "user_segment_targeting"

  - feature: "database_indexing"
    description: "Not an 'infra task', but a core dependency of any feature that queries data"
    forgotten_dependencies:
      - "indexing_for_foreign_keys"
      - "indexing_for_query_clauses_where"
      - "indexing_for_order_by_clauses"
      - "composite_index_for_complex_queries"

  - feature: "email_verification"
    description: "Required for basic security and spam prevention"
    forgotten_dependencies:
      - "email_service"
      - "secure_token_generation"
      - "token_expiration_logic"
      - "user_is_verified_flag_in_db"

  - feature: "webhook_handling"
    description: "Receiving a webhook is easy; receiving it reliably is hard"
    forgotten_dependencies:
      - "idempotency_handling"
      - "background_job_processing"
      - "webhook_signature_verification"
      - "retry_logic_for_failures"

  - feature: "timezones"
    description: "A dependency for any feature that involves time (e.g., scheduling, reminders)"
    forgotten_dependencies:
      - "store_all_datetimes_in_utc"
      - "user_profile_timezone_setting"
      - "timezone_conversion_library"

  - feature: "data_migrations"
    description: "A dependency for any change to the database schema after v1.0"
    forgotten_dependencies:
      - "database_migration_tool"
      - "backward_compatibility_plan"
      - "zero_downtime_deployment_strategy"

  - feature: "audit_logging"
    description: "Often a last-minute enterprise requirement, but touches every service"
    forgotten_dependencies:
      - "audit_log_storage"
      - "audit_log_trigger"
      - "audit_log_viewer_ui"

  - feature: "rate_limiting"
    description: "Not just for security, but for stability. Often forgotten for internal services."
    forgotten_dependencies:
      - "distributed_counter_store"
      - "rate_limiting_algorithm"
      - "client_identifier"

  - feature: "cors_configuration"
    description: "A dependency for any API that is separate from its frontend (e.g., SPA, mobile)"
    forgotten_dependencies:
      - "allowed_origins_whitelist"
      - "allowed_methods_configuration"
      - "preflight_options_handling"

  - feature: "health_check_endpoints"
    description: "A dependency for any service that runs behind a load balancer"
    forgotten_dependencies:
      - "http_health_check_endpoint"
      - "database_connectivity_check"
      - "service_liveness_vs_readiness"

  - feature: "i18n_localization"
    description: "Internationalization (i18n) is an architectural decision, not a feature"
    forgotten_dependencies:
      - "translation_key_store"
      - "i18n_client_library"
      - "user_locale_detection"

  - feature: "graceful_shutdown"
    description: "A dependency for any service, especially background workers"
    forgotten_dependencies:
      - "sigterm_signal_handler"
      - "in_progress_job_completion_logic"
      - "connection_draining_from_load_balancer"

---

# SECTION 6: Dependency Chains (Cascading)

dependency_chains:
  - root_feature: "user_comments_on_posts"
    description: "A 'simple' request to add comments to a blog post."
    immediate_dependencies:
      - "comment_database_table"
      - "comment_api_endpoints"
      - "comment_ui_components"
    cascading_dependencies:
      - from: "comment_database_table"
        leads_to:
          - "database_indexing_for_post_id"
          - "database_indexing_for_user_id"
          - "user_id_foreign_key"
          - "post_id_foreign_key"
          - "comment_moderation_table"
      - from: "comment_api_endpoints"
        leads_to:
          - "authentication_check"
          - "rate_limiting"
          - "input_validation_xss_prevention"
          - "spam_detection_service"
      - from: "comment_ui_components"
        leads_to:
          - "pagination_logic"
          - "reply_threading_if_nested"
          - "edit_delete_ui_with_permissions"
          - "real_time_update_feed"

  - root_feature: "multi_tenant_saas_architecture"
    description: "A user requests a 'SaaS platform'."
    immediate_dependencies:
      - "tenant_onboarding_flow"
      - "subscription_billing"
    cascading_dependencies:
      - from: "tenant_onboarding_flow"
        leads_to:
          - "tenant_isolation_strategy"
      - from: "tenant_isolation_strategy"
        description: "This is the critical branching point."
        leads_to:
          - "database_architecture_choice"
          - "application_level_security_logic"
          - "data_partitioning_model"
      - from: "database_architecture_choice"
        leads_to:
          - "db_per_tenant_model"
          - "shared_db_with_tenant_id_model"
      - from: "subscription_billing"
        leads_to:
          - "payment_gateway_integration"
          - "rbac_by_tier_logic"

  - root_feature: "user_follows_user"
    description: "A user requests a 'follow' button, common in social apps."
    immediate_dependencies:
      - "follow_relationship_table"
    cascading_dependencies:
      - from: "follow_relationship_table"
        description: "The follow is useless unless it builds a feed."
        leads_to:
          - "social_media_feed_generation"
      - from: "social_media_feed_generation"
        leads_to:
          - "fan_out_logic_strategy"
      - from: "fan_out_logic_strategy"
        description: "This choice determines the async architecture."
        leads_to:
          - "background_job_processing_for_fan_out_on_write"
          - "caching_layer_for_fan_out_on_read"

  - root_feature: "checkout_process"
    description: "A user requests a 'checkout' page."
    immediate_dependencies:
      - "shopping_cart"
      - "payment_processing"
    cascading_dependencies:
      - from: "payment_processing"
        leads_to:
          - "payment_gateway_integration"
          - "server_side_payment_intent_endpoint"
          - "webhook_endpoint_for_events"
      - from: "webhook_endpoint_for_events"
        description: "The webhook is the true trigger for fulfillment."
        leads_to:
          - "order_management_system"
          - "inventory_service_decrement_stock"
          - "transactional_email_service"
      - from: "order_management_system"
        leads_to:
          - "financial_transaction_ledger"
          - "shipping_label_generation"

  - root_feature: "video_upload_and_processing"
    description: "A user requests 'video uploads'."
    immediate_dependencies:
      - "file_upload_handling"
    cascading_dependencies:
      - from: "file_upload_handling"
        leads_to:
          - "raw_file_storage_bucket"
          - "background_job_processing"
      - from: "background_job_processing"
        description: "The job is triggered post-upload."
        leads_to:
          - "message_queue"
          - "video_transcoding_service"
      - from: "video_transcoding_service"
        leads_to:
          - "processed_file_storage_bucket"
          - "job_status_tracking"
          - "cdn_integration"

  - root_feature: "real_time_chat_message"
    description: "A user requests a 'chat' feature."
    immediate_dependencies:
      - "websocket_server"
      - "message_database"
    cascading_dependencies:
      - from: "websocket_server"
        description: "Tracks who is online."
        leads_to:
          - "presence_service"
      - from: "presence_service"
        description: "If a user is NOT online..."
        leads_to:
          - "push_notification_service"
      - from: "push_notification_service"
        leads_to:
          - "platform_notification_service_registration"
          - "device_token_database"
          - "notification_aggregation_service"

  - root_feature: "api_request_logging"
    description: "A user requests 'logging for their API'."
    immediate_dependencies:
      - "api_gateway"
    cascading_dependencies:
      - from: "api_gateway"
        description: "The gateway logs the request."
        leads_to:
          - "log_collection_agent"
      - from: "log_collection_agent"
        leads_to:
          - "log_aggregation_service"
      - from: "log_aggregation_service"
        leads_to:
          - "log_datastore"
          - "log_visualization_ui"

  - root_feature: "saas_user_onboarding"
    description: "A user requests a 'SaaS user signup' flow."
    immediate_dependencies:
      - "user_authentication_basic"
      - "tenant_onboarding_flow"
    cascading_dependencies:
      - from: "user_authentication_basic"
        leads_to:
          - "email_verification_system"
      - from: "email_verification_system"
        leads_to:
          - "email_service_provider"
          - "email_queue"
          - "domain_authentication_dkim_spf"
      - from: "tenant_onboarding_flow"
        leads_to:
          - "tenant_isolation_strategy"
          - "database_architecture_choice"
